/*!
 * Master Slider – Responsive Touch Swipe Slider
 * @author Averta (www.averta.net)
 * Copyright © All Rights Reserved, Averta Ltd.
 *
 * @version 2.0.0
 * @date August 2014
 */

 window.averta={};(function(e){function r(){if("result"in arguments.callee)return arguments.callee.result;var e=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/;var t=document.getElementsByTagName("script")[0];for(var n in t.style)if(e.test(n))return arguments.callee.result=n.match(e)[0];if("WebkitOpacity"in t.style)return arguments.callee.result="Webkit";if("KhtmlOpacity"in t.style)return arguments.callee.result="Khtml";return arguments.callee.result=""}function i(e){var t=document.body||document.documentElement;var n=t.style;var r=e;if(typeof n[r]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++){if(typeof n[v[i]+r]=="string"){return true}}return false}function s(){return i("transition")}function o(){return i("transform")}function u(){if(!o())return false;var e=document.createElement("i"),t,n={WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MSTransform:"-ms-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",Transform:"transform",transform:"transform"};e.style.display="block";document.body.insertBefore(e,null);for(var r in n){if(e.style[r]!==undefined){e.style[r]="translate3d(1px,1px,1px)";t=window.getComputedStyle(e).getPropertyValue(n[r])}}document.body.removeChild(e);return t!=null&&t.length>0&&t!=="none"}window.package=function(e){if(!window[e])window[e]={}};var t=function(e,t){for(var n in t)e[n]=t[n]};Function.prototype.extend=function(e){if(typeof e.prototype.constructor==="function"){t(this.prototype,e.prototype);this.prototype.constructor=this}else{this.prototype.extend(e);this.prototype.constructor=this}};var n={Moz:"-moz-",Webkit:"-webkit-",Khtml:"-khtml-",O:"-o-",ms:"-ms-",Icab:"-icab-"};window._mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);window._touch="ontouchstart"in document;e(document).ready(function(){window._jcsspfx=r();window._csspfx=n[window._jcsspfx];window._cssanim=s();window._css3d=u();window._css2d=o()});window.parseQueryString=function(e){var t={};e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,r,i){t[n]=i});return t};var a=50/3;if(!window.requestAnimationFrame){window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,a)}}()}if(!window.getComputedStyle){window.getComputedStyle=function(e,t){this.el=e;this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;if(t=="float")t="styleFloat";if(n.test(t)){t=t.replace(n,function(){return arguments[2].toUpperCase()})}return e.currentStyle[t]?e.currentStyle[t]:null};return e.currentStyle}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var t=this.length>>>0;var n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n);if(n<0)n+=t;for(;n<t;n++){if(n in this&&this[n]===e)return n}return-1}}if(jQuery){e.jqLoadFix=function(){if(this.complete){var t=this;setTimeout(function(){e(t).load()},1)}};jQuery.uaMatch=jQuery.uaMatch||function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}};matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else if(browser.webkit){browser.safari=true}var f=!!navigator.userAgent.match(/Trident\/7\./);if(f){browser.msie="true";delete browser.mozilla}jQuery.browser=browser;e.fn.preloadImg=function(t,n){this.each(function(){var r=e(this);var i=this;var s=new Image;s.onload=function(e){if(e==null)e={};r.attr("src",t);e.width=s.width;e.height=s.height;setTimeout(function(){n.call(i,e)},50);s=null};s.src=t});return this}}})(jQuery);(function(){"use strict";averta.EventDispatcher=function(){this.listeners={}};averta.EventDispatcher.extend=function(e){var t=new averta.EventDispatcher;for(var n in t)if(n!="constructor")e[n]=averta.EventDispatcher.prototype[n]};averta.EventDispatcher.prototype={constructor:averta.EventDispatcher,addEventListener:function(e,t,n){if(!this.listeners[e])this.listeners[e]=[];this.listeners[e].push({listener:t,ref:n})},removeEventListener:function(e,t,n){if(this.listeners[e]){for(var r=0,i=this.listeners[e].length;r<i;++r)if(t==this.listeners[e][r].listener&&n==this.listeners[e][r].ref){this.listeners[e].splice(r,0)}if(this.listeners[e].length==0)delete this.listeners[e]}},dispatchEvent:function(e){e.target=this;if(this.listeners[e.type])for(var t=0,n=this.listeners[e.type].length;t<n;++t){this.listeners[e.type][t].listener.call(this.listeners[e.type][t].ref,e)}}}})();(function(e){"use strict";var t="ontouchstart"in document,n=window.navigator.pointerEnabled,r=!n&&window.navigator.msPointerEnabled,i=n||r,s=(n?"pointerdown ":"")+(r?"MSPointerDown ":"")+(t?"touchstart ":"")+"mousedown",o=(n?"pointermove ":"")+(r?"MSPointerMove ":"")+(t?"touchmove ":"")+"mousemove",u=(n?"pointerup ":"")+(r?"MSPointerUp ":"")+(t?"touchend ":"")+"mouseup",a=(n?"pointercancel ":"")+(r?"MSPointerCancel ":"")+"touchcancel";averta.TouchSwipe=function(e){this.$element=e;this.enabled=true;e.bind(s,{target:this},this.__touchStart);e[0].swipe=this;this.onSwipe=null;this.swipeType="horizontal";this.lastStatus={}};var f=averta.TouchSwipe.prototype;f.getDirection=function(e,t){switch(this.swipeType){case"horizontal":return e<=this.start_x?"left":"right";break;case"vertical":return t<=this.start_y?"up":"down";break;case"all":if(Math.abs(e-this.start_x)>Math.abs(t-this.start_y))return e<=this.start_x?"left":"right";else return t<=this.start_y?"up":"down";break}};f.priventDefultEvent=function(e,t){var n=Math.abs(e-this.start_x);var r=Math.abs(t-this.start_y);var i=n>r;return this.swipeType==="horizontal"&&i||this.swipeType==="vertical"&&!i};f.createStatusObject=function(e){var t={},n,r;n=this.lastStatus.distanceX||0;r=this.lastStatus.distanceY||0;t.distanceX=e.pageX-this.start_x;t.distanceY=e.pageY-this.start_y;t.moveX=t.distanceX-n;t.moveY=t.distanceY-r;t.distance=parseInt(Math.sqrt(Math.pow(t.distanceX,2)+Math.pow(t.distanceY,2)));t.duration=(new Date).getTime()-this.start_time;t.direction=this.getDirection(e.pageX,e.pageY);return t};f.__reset=function(e,n){this.reset=false;this.lastStatus={};this.start_time=(new Date).getTime();this.start_x=t?e.touches[0].pageX:i?e.pageX:n.pageX;this.start_y=t?e.touches[0].pageY:i?e.pageY:n.pageY};f.__touchStart=function(n){var r=n.data.target;var s=n;if(!r.enabled)return;n=n.originalEvent;if(i){e(this).css("-ms-touch-action",r.swipeType==="horizontal"?"pan-y":"pan-x")}if(!r.onSwipe){e.error("Swipe listener is undefined");return}if(r.touchStarted)return;r.start_x=t?n.touches[0].pageX:i?n.pageX:s.pageX;r.start_y=t?n.touches[0].pageY:i?n.pageY:s.pageY;r.start_time=(new Date).getTime();e(document).bind(u,{target:r},r.__touchEnd).bind(o,{target:r},r.__touchMove).bind(a,{target:r},r.__touchCancel);var f=t?n.touches[0]:i?n:s;var l=r.createStatusObject(f);l.phase="start";r.onSwipe.call(null,l);if(!t)s.preventDefault();r.lastStatus=l;r.touchStarted=true};f.__touchMove=function(e){var n=e.data.target;var r=e;e=e.originalEvent;if(!n.touchStarted)return;clearTimeout(n.timo);n.timo=setTimeout(function(){n.__reset(e,r)},60);var s=t?e.touches[0]:i?e:r;var o=n.createStatusObject(s);if(n.priventDefultEvent(s.pageX,s.pageY))r.preventDefault();o.phase="move";n.lastStatus=o;n.onSwipe.call(null,o)};f.__touchEnd=function(n){var r=n.data.target;var s=n;n=n.originalEvent;clearTimeout(r.timo);var f=t?n.touches[0]:i?n:s;var l=r.lastStatus;if(!t)s.preventDefault();l.phase="end";r.touchStarted=false;r.priventEvt=null;e(document).unbind(u,r.__touchEnd).unbind(o,r.__touchMove).unbind(a,r.__touchCancel);l.speed=l.distance/l.duration;r.onSwipe.call(null,l)};f.__touchCancel=function(e){var t=e.data.target;t.__touchEnd(e)};f.enable=function(){if(this.enabled)return;this.enabled=true};f.disable=function(){if(!this.enabled)return;this.enabled=false}})(jQuery);(function(){"use strict";averta.Ticker=function(){};var e=averta.Ticker,t=[],n=0,r=true;e.add=function(r,i){t.push([r,i]);if(t.length===1)e.start();n=t.length;return n};e.remove=function(r,i){for(var s=0,o=t.length;s<o;++s){if(t[s]&&t[s][0]===r&&t[s][1]===i){t.splice(s,1)}}n=t.length;if(n===0){e.stop()}};e.start=function(){if(!r)return;r=false;i()};e.stop=function(){r=true};var i=function(){if(e.__stopped)return;var r;for(var s=0;s!==n;s++){r=t[s];r[0].call(r[1])}requestAnimationFrame(i)}})();(function(){"use strict";if(!Date.now){Date.now=function(){return(new Date).getTime()}}averta.Timer=function(e,t){this.delay=e;this.currentCount=0;this.paused=false;this.onTimer=null;this.refrence=null;if(t)this.start()};averta.Timer.prototype={constructor:averta.Timer,start:function(){this.paused=false;this.lastTime=Date.now();averta.Ticker.add(this.update,this)},stop:function(){this.paused=true;averta.Ticker.remove(this.update,this)},reset:function(){this.currentCount=0;this.paused=true;this.lastTime=Date.now()},update:function(){if(this.paused||Date.now()-this.lastTime<this.delay)return;this.currentCount++;this.lastTime=Date.now();if(this.onTimer)this.onTimer.call(this.refrence,this.getTime())},getTime:function(){return this.delay*this.currentCount}}})();(function(){"use strict";var e=null;window.CSSTween=function(e,t,n,r){this.$element=e;this.duration=t||1e3;this.delay=n||0;this.ease=r||"linear"};var t=CSSTween.prototype;t.to=function(e,t){this.to_cb=e;this.to_cb_target=t;return this};t.from=function(e,t){this.fr_cb=e;this.fr_cb_target=t;return this};t.onComplete=function(e,t){this.oc_fb=e;this.oc_fb_target=t;return this};t.chain=function(e){this.chained_tween=e;return this};t.reset=function(){clearTimeout(this.start_to);clearTimeout(this.end_to)};t.start=function(){clearTimeout(this.start_to);clearTimeout(this.end_to);this.fresh=true;if(this.fr_cb){this.$element.css(window._jcsspfx+"TransitionDuration","0ms");this.fr_cb.call(this.fr_cb_target)}var e=this;this.onTransComplete=function(t){if(!e.fresh)return;e.reset();this.$element.css(window._jcsspfx+"TransitionDuration","").css(window._jcsspfx+"TransitionProperty","").css(window._jcsspfx+"TransitionTimingFunction","").css(window._jcsspfx+"TransitionDelay","");e.fresh=false;if(e.chained_tween)e.chained_tween.start();if(e.oc_fb)e.oc_fb.call(e.oc_fb_target)};this.start_to=setTimeout(function(){if(!e.$element)return;e.$element.css(window._jcsspfx+"TransitionDuration",e.duration+"ms").css(window._jcsspfx+"TransitionProperty","all");if(e.delay>0)e.$element.css(window._jcsspfx+"TransitionDelay",e.delay+"ms");else e.$element.css(window._jcsspfx+"TransitionDelay","");e.$element.css(window._jcsspfx+"TransitionTimingFunction",e.ease);if(e.to_cb)e.to_cb.call(e.to_cb_target);e.end_to=setTimeout(function(){e.onTransComplete()},e.duration+(e.delay||0))},100);return this}})();(function(){"use strict";function t(t,n){if(n.x!==undefined||n.y!==undefined){if(e){var r=window._jcsspfx+"Transform";if(n.x!==undefined){n[r]=(n[r]||"")+" translateX("+n.x+"px)";delete n.x}if(n.y!==undefined){n[r]=(n[r]||"")+" translateY("+n.y+"px)";delete n.y}}else{if(n.x!==undefined){var i=t.css("right")!=="auto"?"right":"left";n[i]=n.x+"px";delete n.x}if(n.y!==undefined){var s=t.css("bottom")!=="auto"?"bottom":"top";n[s]=n.y+"px";delete n.y}}}return n}var e=null;window.CTween={};CTween.setPos=function(e,n){e.css(t(e,n))};CTween.animate=function(n,r,i,s){if(e==null)e=window._cssanim;s=s||{};t(n,i);if(e){var o=new CSSTween(n,r,s.delay,EaseDic[s.ease]);o.to(function(){n.css(i)});if(s.complete)o.onComplete(s.complete,s.target);o.start();o.stop=o.reset;return o}var u;if(s.delay)n.delay(s.delay);if(s.complete)u=function(){s.complete.call(s.target)};n.stop(true).animate(i,r,s.ease||"linear",u);return n};CTween.fadeOut=function(e,t,n){var r={};if(n)r.complete=function(){e.remove()};CTween.animate(e,t||1e3,{opacity:0},r)};CTween.fadeIn=function(e,t){e.css("opacity",0);CTween.animate(e,t||1e3,{opacity:1})}})();(function(){window.EaseDic={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInCubic:"cubic-bezier(.55,.055,.675,.19)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"}})();(function(){"use strict";window.MSAligner=function(e,t,n){this.$container=t;this.$img=n;this.type=e||"stretch";this.widthOnly=false;this.heightOnly=false};var e=MSAligner.prototype;e.init=function(e,t){this.baseWidth=e;this.baseHeight=t;this.imgRatio=e/t;this.imgRatio2=t/e;switch(this.type){case"tile":this.$container.css("background-image","url("+this.$img.attr("src")+")");this.$img.remove();break;case"center":this.$container.css("background-image","url("+this.$img.attr("src")+")");this.$container.css({backgroundPosition:"center center",backgroundRepeat:"no-repeat"});this.$img.remove();break;case"stretch":this.$img.css({width:"100%",height:"100%"});break;case"fill":case"fit":this.needAlign=true;this.align();break}};e.align=function(){if(!this.needAlign)return;var e=this.$container.width();var t=this.$container.height();var n=e/t;if(this.type=="fill"){if(this.imgRatio<n){this.$img.width(e);this.$img.height(e*this.imgRatio2)}else{this.$img.height(t);this.$img.width(t*this.imgRatio)}}else if(this.type=="fit"){if(this.imgRatio<n){this.$img.height(t);this.$img.width(t*this.imgRatio)}else{this.$img.width(e);this.$img.height(e*this.imgRatio2)}}this.setMargin()};e.setMargin=function(){var e=this.$container.width();var t=this.$container.height();this.$img.css("margin-top",(t-this.$img[0].offsetHeight)/2+"px");this.$img.css("margin-left",(e-this.$img[0].offsetWidth)/2+"px")}})();(function(){"use strict";var e={bouncing:true,snapping:false,snapsize:null,friction:.05,outFriction:.05,outAcceleration:.09,minValidDist:.3,snappingMinSpeed:2,paging:false,endless:false,maxSpeed:160};var t=function(t,n,r){if(n===null||t===null){throw new Error("Max and Min values are required.")}this.options=r||{};for(var i in e){if(!(i in this.options))this.options[i]=e[i]}this._max_value=n;this._min_value=t;this.value=t;this.end_loc=t;this.current_snap=this.getSnapNum(t);this.__extrStep=0;this.__extraMove=0;this.__animID=-1};var n=t.prototype;n.changeTo=function(e,t,n,r,i){this.stopped=false;this._internalStop();e=this._checkLimits(e);n=Math.abs(n||0);if(this.options.snapping){r=r||this.getSnapNum(e);if(i!==false)this._callsnapChange(r);this.current_snap=r}if(t){this.animating=true;var s=this,o=++s.__animID,u=e-s.value,a=0,f=e,l=1-s.options.friction,c=l+(n-20)*l*1.3/s.options.maxSpeed;var h=function(){if(o!==s.__animID)return;var t=e-s.value;if(Math.abs(t)>s.options.minValidDist&&s.animating){window.requestAnimationFrame(h)}else{if(s.animating){s.value=e;s._callrenderer()}s.animating=false;if(o!==s.__animID){s.__animID=-1}s._callonComplete("anim");return}s.value=f-u*Math.exp(-++a*c);s._callrenderer()};h();return}this.value=e;this._callrenderer()};n.drag=function(e){if(this.start_drag){this.drag_start_loc=this.value;this.start_drag=false}this.animating=false;this._deceleration=false;this.value-=e;if(!this.options.endless&&(this.value>this._max_value||this.value<0)){if(this.options.bouncing){this.__isout=true;this.value+=e*.6}else if(this.value>this._max_value){this.value=this._max_value}else{this.value=0}}else if(!this.options.endless&&this.options.bouncing){this.__isout=false}this._callrenderer()};n.push=function(e){this.stopped=false;if(this.options.snapping&&Math.abs(e)<=this.options.snappingMinSpeed){this.cancel();return}this.__speed=e;this.__startSpeed=e;this.end_loc=this._calculateEnd();if(this.options.snapping){var t=this.getSnapNum(this.value),n=this.getSnapNum(this.end_loc);if(this.options.paging){t=this.getSnapNum(this.drag_start_loc);this.__isout=false;if(e>0){this.gotoSnap(t+1,true,e)}else{this.gotoSnap(t-1,true,e)}return}else if(t===n){this.cancel();return}this._callsnapChange(n);this.current_snap=n}this.animating=false;this.__needsSnap=this.options.endless||this.end_loc>this._min_value&&this.end_loc<this._max_value;if(this.options.snapping&&this.__needsSnap)this.__extraMove=this._calculateExtraMove(this.end_loc);this._startDecelaration()};n.bounce=function(e){if(this.animating)return;this.stopped=false;this.animating=false;this.__speed=e;this.__startSpeed=e;this.end_loc=this._calculateEnd();this._startDecelaration()};n.stop=function(){this.stopped=true;this._internalStop()};n.cancel=function(){this.start_drag=true;if(this.__isout){this.__speed=4e-4;this._startDecelaration()}else if(this.options.snapping){this.gotoSnap(this.getSnapNum(this.value),true)}};n.renderCallback=function(e,t){this.__renderHook={fun:e,ref:t}};n.snappingCallback=function(e,t){this.__snapHook={fun:e,ref:t}};n.snapCompleteCallback=function(e,t){this.__compHook={fun:e,ref:t}};n.getSnapNum=function(e){return Math.floor((e+this.options.snapsize/2)/this.options.snapsize)};n.nextSnap=function(){this._internalStop();var e=this.getSnapNum(this.value);if(!this.options.endless&&(e+1)*this.options.snapsize>this._max_value){this.__speed=8;this.__needsSnap=false;this._startDecelaration()}else{this.gotoSnap(e+1,true)}};n.prevSnap=function(){this._internalStop();var e=this.getSnapNum(this.value);if(!this.options.endless&&(e-1)*this.options.snapsize<this._min_value){this.__speed=-8;this.__needsSnap=false;this._startDecelaration()}else{this.gotoSnap(e-1,true)}};n.gotoSnap=function(e,t,n){this.changeTo(e*this.options.snapsize,t,n,e)};n.destroy=function(){this._internalStop();this.__renderHook=null;this.__snapHook=null;this.__compHook=null};n._internalStop=function(){this.start_drag=true;this.animating=false;this._deceleration=false;this.__extrStep=0};n._calculateExtraMove=function(e){var t=e%this.options.snapsize;return t<this.options.snapsize/2?-t:this.options.snapsize-t};n._calculateEnd=function(e){var t=this.__speed;var n=this.value;var r=0;while(Math.abs(t)>this.options.minValidDist){n+=t;t*=this.options.friction;r++}if(e)return r;return n};n._checkLimits=function(e){if(this.options.endless)return e;if(e<this._min_value)return this._min_value;if(e>this._max_value)return this._max_value;return e};n._callrenderer=function(){if(this.__renderHook)this.__renderHook.fun.call(this.__renderHook.ref,this,this.value)};n._callsnapChange=function(e){if(!this.__snapHook||e===this.current_snap)return;this.__snapHook.fun.call(this.__snapHook.ref,this,e,e-this.current_snap)};n._callonComplete=function(e){if(this.__compHook&&!this.stopped){this.__compHook.fun.call(this.__compHook.ref,this,this.current_snap,e)}};n._computeDeceleration=function(){if(this.options.snapping&&this.__needsSnap){var e=(this.__startSpeed-this.__speed)/this.__startSpeed*this.__extraMove;this.value+=this.__speed+e-this.__extrStep;this.__extrStep=e}else{this.value+=this.__speed}this.__speed*=this.options.friction;if(!this.options.endless&&!this.options.bouncing){if(this.value<=this._min_value){this.value=this._min_value;this.__speed=0}else if(this.value>=this._max_value){this.value=this._max_value;this.__speed=0}}this._callrenderer();if(!this.options.endless&&this.options.bouncing){var t=0;if(this.value<this._min_value){t=this._min_value-this.value}else if(this.value>this._max_value){t=this._max_value-this.value}this.__isout=Math.abs(t)>=this.options.minValidDist;if(this.__isout){if(this.__speed*t<=0){this.__speed+=t*this.options.outFriction}else{this.__speed=t*this.options.outAcceleration}}}};n._startDecelaration=function(){if(this._deceleration)return;this._deceleration=true;var e=this;var t=function(){if(!e._deceleration)return;e._computeDeceleration();if(Math.abs(e.__speed)>e.options.minValidDist||e.__isout){window.requestAnimationFrame(t)}else{e._deceleration=false;e.__isout=false;if(this.__needsSnap&&e.options.snapping&&!e.options.paging){e.value=e._checkLimits(e.end_loc+e.__extraMove)}else{e.value=Math.round(e.value)}e._callrenderer();e._callonComplete("decel")}};t()};window.Controller=t})();(function(e){window.MSLayerEffects={};var t,n={opacity:0};MSLayerEffects.setup=function(){if(t)return;t=true;var r=MSLayerEffects,i=window._jcsspfx+"Transform",s=window._jcsspfx+"TransformOrigin",o=e.browser.opera;_2d=window._css2d&&window._cssanim&&!o;r.defaultValues={left:0,top:0,opacity:1,right:0,bottom:0};r.defaultValues[i]="";r.rf=1;r.presetEffParams={random:"30|300","long":300,"short":30,"false":false,"true":true,tl:"top left",bl:"bottom left",tr:"top right",br:"bottom right",rt:"top right",lb:"bottom left",lt:"top left",rb:"bottom right",t:"top",b:"bottom",r:"right",l:"left",c:"center"};r.fade=function(){return n};r.left=_2d?function(e,t){var n=t===false?{}:{opacity:0};n[i]="translateX("+ -e*r.rf+"px)";return n}:function(e,t){var n=t===false?{}:{opacity:0};n.left=-e*r.rf+"px";return n};r.right=_2d?function(e,t){var n=t===false?{}:{opacity:0};n[i]="translateX("+e*r.rf+"px)";return n}:function(e,t){var n=t===false?{}:{opacity:0};n.left=e*r.rf+"px";return n};r.top=_2d?function(e,t){var n=t===false?{}:{opacity:0};n[i]="translateY("+ -e*r.rf+"px)";return n}:function(e,t){var n=t===false?{}:{opacity:0};n.top=-e*r.rf+"px";return n};r.bottom=_2d?function(e,t){var n=t===false?{}:{opacity:0};n[i]="translateY("+e*r.rf+"px)";return n}:function(e,t){var n=t===false?{}:{opacity:0};n.top=e*r.rf+"px";return n};r.from=_2d?function(e,t,n){var s=n===false?{}:{opacity:0};s[i]="translateX("+e*r.rf+"px) translateY("+t*r.rf+"px)";return s}:function(e,t,n){var i=n===false?{}:{opacity:0};i.top=t*r.rf+"px";i.left=e*r.rf+"px";return i};r.rotate=_2d?function(e,t){var n={opacity:0};n[i]=" rotate("+e+"deg)";if(t)n[s]=t;return n}:function(e,t){return n};r.rotateleft=_2d?function(e,t,n,o){var u=r.left(t,o);u[i]+=" rotate("+e+"deg)";if(n)u[s]=n;return u}:function(e,t,n,i){return r.left(t,i)};r.rotateright=_2d?function(e,t,n,o){var u=r.right(t,o);u[i]+=" rotate("+e+"deg)";if(n)u[s]=n;return u}:function(e,t,n,i){return r.right(t,i)};r.rotatetop=_2d?function(e,t,n,o){var u=r.top(t,o);u[i]+=" rotate("+e+"deg)";if(n)u[s]=n;return u}:function(e,t,n,i){return r.top(t,i)};r.rotatebottom=_2d?function(e,t,n,o){var u=r.bottom(t,o);u[i]+=" rotate("+e+"deg)";if(n)u[s]=n;return u}:function(e,t,n,i){return r.bottom(t,i)};r.rotatefrom=_2d?function(e,t,n,o,u){var a=r.from(t,n,u);a[i]+=" rotate("+e+"deg)";if(o)a[s]=o;return a}:function(e,t,n,i,s){return r.from(t,n,s)};r.skewleft=_2d?function(e,t,n){var s=r.left(t,n);s[i]+=" skewX("+e+"deg)";return s}:function(e,t,n){return r.left(t,n)};r.skewright=_2d?function(e,t,n){var s=r.right(t,n);s[i]+=" skewX("+ -e+"deg)";return s}:function(e,t,n){return r.right(t,n)};r.skewtop=_2d?function(e,t,n){var s=r.top(t,n);s[i]+=" skewY("+e+"deg)";return s}:function(e,t,n){return r.top(t,n)};r.skewbottom=_2d?function(e,t,n){var s=r.bottom(t,n);s[i]+=" skewY("+ -e+"deg)";return s}:function(e,t,n){return r.bottom(t,n)};r.scale=_2d?function(e,t,n,r){var o=r===false?{}:{opacity:0};o[i]=" scaleX("+e+") scaleY("+t+")";if(n)o[s]=n;return o}:function(e,t,n,r){return r===false?{}:{opacity:0}};r.scaleleft=_2d?function(e,t,n,o,u){var a=r.left(n,u);a[i]=" scaleX("+e+") scaleY("+t+")";if(o)a[s]=o;return a}:function(e,t,n,i,s){return r.left(n,s)};r.scaleright=_2d?function(e,t,n,o,u){var a=r.right(n,u);a[i]=" scaleX("+e+") scaleY("+t+")";if(o)a[s]=o;return a}:function(e,t,n,i,s){return r.right(n,s)};r.scaletop=_2d?function(e,t,n,o,u){var a=r.top(n,u);a[i]=" scaleX("+e+") scaleY("+t+")";if(o)a[s]=o;return a}:function(e,t,n,i,s){return r.top(n,s)};r.scalebottom=_2d?function(e,t,n,o,u){var a=r.bottom(n,u);a[i]=" scaleX("+e+") scaleY("+t+")";if(o)a[s]=o;return a}:function(e,t,n,i,s){return r.bottom(n,s)};r.scalefrom=_2d?function(e,t,n,o,u,a){var f=r.from(n,o,a);f[i]+=" scaleX("+e+") scaleY("+t+")";if(u)f[s]=u;return f}:function(e,t,n,i,s,o){return r.from(n,i,o)};r.rotatescale=_2d?function(e,t,n,o,u){var a=r.scale(t,n,o,u);a[i]+=" rotate("+e+"deg)";if(o)a[s]=o;return a}:function(e,t,n,i,s){return r.scale(t,n,i,s)};r.front=window._css3d?function(e,t){var n=t===false?{}:{opacity:0};n[i]="perspective(2000px) translate3d(0 , 0 ,"+e+"px ) rotate(0.001deg)";return n}:function(e){return n};r.back=window._css3d?function(e,t){var n=t===false?{}:{opacity:0};n[i]="perspective(2000px) translate3d(0 , 0 ,"+ -e+"px ) rotate(0.001deg)";return n}:function(e){return n};r.rotatefront=window._css3d?function(e,t,n,r){var o=r===false?{}:{opacity:0};o[i]="perspective(2000px) translate3d(0 , 0 ,"+t+"px ) rotate("+(e||.001)+"deg)";if(n)o[s]=n;return o}:function(e,t,r,i){return n};r.rotateback=window._css3d?function(e,t,n,r){var o=r===false?{}:{opacity:0};o[i]="perspective(2000px) translate3d(0 , 0 ,"+ -t+"px ) rotate("+(e||.001)+"deg)";if(n)o[s]=n;return o}:function(e,t,r,i){return n};r.rotate3dleft=window._css3d?function(e,t,n,o,u,a){var f=r.left(o,a);f[i]+=(e?" rotateX("+e+"deg)":" ")+(t?" rotateY("+t+"deg)":"")+(n?" rotateZ("+n+"deg)":"");if(u)f[s]=u;return f}:function(e,t,n,i,s,o){return r.left(i,o);};r.rotate3dright=window._css3d?function(e,t,n,o,u,a){var f=r.right(o,a);f[i]+=(e?" rotateX("+e+"deg)":" ")+(t?" rotateY("+t+"deg)":"")+(n?" rotateZ("+n+"deg)":"");if(u)f[s]=u;return f}:function(e,t,n,i,s,o){return r.right(i,o);};r.rotate3dtop=window._css3d?function(e,t,n,o,u,a){var f=r.top(o,a);f[i]+=(e?" rotateX("+e+"deg)":" ")+(t?" rotateY("+t+"deg)":"")+(n?" rotateZ("+n+"deg)":"");if(u)f[s]=u;return f}:function(e,t,n,i,s,o){return r.top(i,o);};r.rotate3dbottom=window._css3d?function(e,t,n,o,u,a){var f=r.bottom(o,a);f[i]+=(e?" rotateX("+e+"deg)":" ")+(t?" rotateY("+t+"deg)":"")+(n?" rotateZ("+n+"deg)":"");if(u)f[s]=u;return f}:function(e,t,n,i,s,o){return r.bottom(i,o)};r.rotate3dfront=window._css3d?function(e,t,n,o,u,a){var f=r.front(o,a);f[i]+=(e?" rotateX("+e+"deg)":" ")+(t?" rotateY("+t+"deg)":"")+(n?" rotateZ("+n+"deg)":"");if(u)f[s]=u;return f}:function(e,t,n,i,s,o){return r.front(i,o)};r.rotate3dback=window._css3d?function(e,t,n,o,u,a){var f=r.back(o,a);f[i]+=(e?" rotateX("+e+"deg)":" ")+(t?" rotateY("+t+"deg)":"")+(n?" rotateZ("+n+"deg)":"");if(u)f[s]=u;return f}:function(e,t,n,i,s,o){return r.back(i,o)};r.t=window._css3d?function(e,t,n,o,u,a,f,l,c,h,p,d,v,m,g){var y=e===false?{}:{opacity:0};var b="perspective(2000px) ";t!=="n"&&(b+="translateX("+t*r.rf+"px) ");n!=="n"&&(b+="translateY("+n*r.rf+"px) ");o!=="n"&&(b+="translateZ("+o*r.rf+"px) ");u!=="n"&&(b+="rotate("+u+"deg) ");a!=="n"&&(b+="rotateX("+a+"deg) ");f!=="n"&&(b+="rotateY("+f+"deg) ");l!=="n"&&(b+="rotateZ("+l+"deg) ");p!=="n"&&(b+="skewX("+p+"deg) ");d!=="n"&&(b+="skewY("+d+"deg) ");c!=="n"&&(b+="scaleX("+c+") ");h!=="n"&&(b+="scaleY("+h+")");y[i]=b;var w="";w+=v!=="n"?v+"% ":"50% ";w+=m!=="n"?m+"% ":"50% ";w+=g!=="n"?g+"px":"";y[s]=w;return y}:function(e,t,n,i,s,o,u,a,f,l,c,h,p,d,v){var s=e===false?{}:{opacity:0};t!=="n"&&(s.left=t*r.rf+"px");n!=="n"&&(s.top=n*r.rf+"px");return s}}})(jQuery);(function(e){window.MSLayerElement=function(){this.$cont=e("<div></div>").addClass("layer-cont");this.start_anim={name:"fade",duration:1e3,ease:"linear",delay:0};this.end_anim={duration:1e3,ease:"linear"};this.type="text";this.resizable=true;this.minWidth=-1;this.__cssConfig=["margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","font-size","line-height","width","left","right","top","bottom"];this.baseStyle={}};var t=MSLayerElement.prototype;t.__playAnimation=function(e,t){var n={};if(e.ease)n.ease=e.ease;this.show_tween=CTween.animate(this.$element,e.duration,t,n)};t._randomParam=function(e){var t=Number(e.slice(0,e.indexOf("|")));var n=Number(e.slice(e.indexOf("|")+1));return t+Math.random()*(n-t)};t._parseEff=function(e){var t=[];if(e.indexOf("(")!==-1){var n=e.slice(0,e.indexOf("(")).toLowerCase();var r;t=e.slice(e.indexOf("(")+1,-1).replace(/\"|\'|\s/g,"").split(",");e=n;for(var i=0,s=t.length;i<s;++i){r=t[i];if(r in MSLayerEffects.presetEffParams)r=MSLayerEffects.presetEffParams[r];t[i]=r}}return{eff_name:e,eff_params:t}};t._parseEffParams=function(e){var t=[];for(var n=0,r=e.length;n<r;++n){var i=e[n];if(typeof i==="string"&&i.indexOf("|")!==-1)i=this._randomParam(i);t[n]=i}return t};t._checkPosKey=function(e,t){if(e==="left"&&!(e in this.baseStyle)&&"right"in this.baseStyle){t.right=-parseInt(t.left)+"px";delete t.left;return true}if(e==="top"&&!(e in this.baseStyle)&&"bottom"in this.baseStyle){t.bottom=-parseInt(t.top)+"px";delete t.top;return true}return false};t.setStartAnim=function(t){e.extend(this.start_anim,t);e.extend(this.start_anim,this._parseEff(this.start_anim.name));this.$element.css("visibility","hidden")};t.setEndAnim=function(t){e.extend(this.end_anim,t)};t.create=function(){this.$element.css("display","none").removeAttr("data-delay").removeAttr("data-effect").removeAttr("data-duration").removeAttr("data-type");if(this.$element.data("resize")!==undefined){this.resizable=this.$element.data("resize");this.$element.removeAttr("data-resize")}if(this.$element.data("fixed")!==undefined){this.fixed=this.$element.data("fixed");this.$element.removeAttr("data-fixed")}if(this.$element.data("widthlimit")!==undefined){this.minWidth=this.$element.data("widthlimit");this.$element.removeAttr("data-widthlimit")}if(!this.end_anim.name){this.end_anim.name=this.start_anim.name}if(this.end_anim.time){this.autoHide=true}if(this.$element.data("action")!==undefined){var t=this.slide.slider.slideController;this.$element.on("click",function(n){t.runAction(e(this).data("action"));n.preventDefault()}).addClass("ms-action-layer")}e.extend(this.end_anim,this._parseEff(this.end_anim.name));this.slider=this.slide.slider;var n=this.layerOrigin=this.$element.data("origin");if(n){var r=n.charAt(0),i=n.charAt(1),s=this.$element.data("offset-x"),o=this.$element.data("offset-y");if(o!==undefined){this.$element.removeAttr("data-offset-y")}else{o=0}switch(r){case"t":this.$element[0].style.top=o+"px";break;case"b":this.$element[0].style.bottom=o+"px";break;case"m":this.$element[0].style.top=o+"px";this.middleAlign=true}if(s!==undefined){this.$element.removeAttr("data-offset-x")}else{s=0}switch(i){case"l":this.$element[0].style.left=s+"px";break;case"r":this.$element[0].style.right=s+"px";break;case"c":this.$element[0].style.left=s+"px";this.centerAlign=true}this.$element.removeAttr("data-origin")}this.parallax=this.$element.data("parallax");if(this.parallax!=null){this.parallax/=100;this.$parallaxElement=e("<div></div>").addClass("ms-parallax-layer");if(this.link){this.link.wrap(this.$parallaxElement);this.$parallaxElement=this.link.parent()}else{this.$element.wrap(this.$parallaxElement);this.$parallaxElement=this.$element.parent()}this._lastParaX=0;this._lastParaY=0;this._paraX=0;this._paraY=0;this.alignedToBot=this.layerOrigin&&this.layerOrigin.indexOf("b")!==-1;if(this.alignedToBot){this.$parallaxElement.css("bottom",0)}if(window._css3d){this.parallaxRender=this.parallaxCSS3DRenderer}else if(window._css2d){this.parallaxRender=this.parallaxCSS2DRenderer}else{this.parallaxRender=this.parallax2DRenderer}if(this.slider.options.parallaxMode!=="swipe"){averta.Ticker.add(this.parallaxRender,this)}}};t.moveParallax=function(e,t,n){this._paraX=e;this._paraY=t;if(n){this._lastParaX=e;this._lastParaY=t;this.parallaxRender()}};t.parallaxCalc=function(){var e=this._paraX-this._lastParaX,t=this._paraY-this._lastParaY;this._lastParaX+=e/12;this._lastParaY+=t/12;if(Math.abs(e)<.019){this._lastParaX=this._paraX}if(Math.abs(t)<.019){this._lastParaY=this._paraY}};t.parallaxCSS3DRenderer=function(){this.parallaxCalc();this.$parallaxElement[0].style[window._jcsspfx+"Transform"]="translateX("+this._lastParaX*this.parallax+"px) translateY("+this._lastParaY*this.parallax+"px) translateZ(0)"};t.parallaxCSS2DRenderer=function(){this.parallaxCalc();this.$parallaxElement[0].style[window._jcsspfx+"Transform"]="translateX("+this._lastParaX*this.parallax+"px) translateY("+this._lastParaY*this.parallax+"px)"};t.parallax2DRenderer=function(){this.parallaxCalc();if(this.alignedToBot){this.$parallaxElement[0].style.bottom=this._lastParaY*this.parallax+"px"}else{this.$parallaxElement[0].style.top=this._lastParaY*this.parallax+"px"}this.$parallaxElement[0].style.left=this._lastParaX*this.parallax+"px"};t.init=function(){this.initialized=true;var e;this.$element.css("visibility","");for(var t=0,n=this.__cssConfig.length;t<n;t++){var r=this.__cssConfig[t];if(this.type==="text"&&r==="width"){e=this.$element[0].style.width}else{e=this.$element.css(r)}if(e!="auto"&&e!=""&&e!="normal")this.baseStyle[r]=parseInt(e)}if(this.middleAlign){this.baseHeight=this.$element.outerHeight(false)}if(this.centerAlign){this.baseWidth=this.$element.outerWidth(false)}};t.locate=function(){var e=this.slide.$layers,t=parseFloat(e.css("width")),n=parseFloat(e.css("height")),r,i;this.visible(this.minWidth<t);r=this.resizeFactor=t/this.slide.slider.options.width;for(var s in this.baseStyle){i=s==="top"||s==="left"||s==="bottom"||s==="right";if(this.fixed&&i){r=1}else{r=this.resizeFactor}if(!this.resizable&&!i){continue}if(s==="top"&&this.middleAlign){this.baseHeight=this.$element.outerHeight(false);this.$element.css(s,this.baseStyle[s]*r+(n-this.baseHeight*r)/2+"px")}else if(s==="left"&&this.centerAlign){this.baseWidth=this.$element.outerWidth(false);this.$element.css(s,this.baseStyle[s]*r+(t-this.baseWidth*r)/2+"px")}else{this.$element.css(s,this.baseStyle[s]*r+"px")}}};t.start=function(){if(this.isShowing)return;this.isShowing=true;var e,t,n=this.slide.$layers;MSLayerEffects.rf=this.resizeFactor;var r=MSLayerEffects[this.start_anim.eff_name].apply(null,this._parseEffParams(this.start_anim.eff_params));var i={};for(e in r){if(this._checkPosKey(e,r)){continue}if(MSLayerEffects.defaultValues[e]!=null){i[e]=MSLayerEffects.defaultValues[e]}if(e in this.baseStyle){t=this.baseStyle[e];if(this.middleAlign&&e==="top"){t+=(parseInt(n.height())-this.baseHeight*this.resizeFactor)/2}if(this.centerAlign&&e==="left"){t+=(parseInt(n.width())-this.baseWidth*this.resizeFactor)/2}r[e]=t+parseFloat(r[e])+"px";i[e]=t+"px"}this.$element.css(e,r[e])}var s=this;clearTimeout(this.to);this.to=setTimeout(function(){s.$element.css("display","");s.__playAnimation(s.start_anim,i)},s.start_anim.delay||.01);this.cl_to=setTimeout(function(){s.show_cl=true},(this.start_anim.delay||.01)+this.start_anim.duration);if(this.autoHide){clearTimeout(this.hto);this.hto=setTimeout(function(){s.hide()},s.end_anim.time)}};t.hide=function(){this.isShowing=false;var e=MSLayerEffects[this.end_anim.eff_name].apply(null,this._parseEffParams(this.end_anim.eff_params));for(key in e){if(this._checkPosKey(key,e))continue;if(key===window._jcsspfx+"TransformOrigin"){this.$element.css(key,e[key])}if(key in this.baseStyle){e[key]=this.baseStyle[key]+parseFloat(e[key])+"px"}}this.__playAnimation(this.end_anim,e);clearTimeout(this.to);clearTimeout(this.hto);clearTimeout(this.cl_to)};t.reset=function(){this.isShowing=false;this.$element[0].style.display="none";this.$element.css("opacity","100");this.$element[0].style["transitionDuration"]="0ms";if(this.show_tween)this.show_tween.stop(true);clearTimeout(this.to);clearTimeout(this.hto)};t.destroy=function(){this.reset();this.$element.remove();this.$cont.remove()};t.visible=function(e){if(this.isVisible==e)return;this.isVisible=e;this.$element.css("display",e?"":"none")}})(jQuery);(function(e){window.MSImageLayerElement=function(){MSLayerElement.call(this);this.needPreload=true;this.__cssConfig=["margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","left","right","top","bottom","width","height"];this.type="image"};MSImageLayerElement.extend(MSLayerElement);var t=MSImageLayerElement.prototype;var n=MSLayerElement.prototype;t.create=function(){if(this.link){var t=this.$element.parent();t.append(this.link);this.link.append(this.$element);this.link.removeClass("ms-layer");this.$element.addClass("ms-layer");t=null}n.create.call(this);if(this.$element.data("src")!=undefined){this.img_src=this.$element.data("src");this.$element.removeAttr("data-src")}else{var r=this;this.$element.on("load",function(e){r.slide.preloadCount--;if(r.slide.preloadCount===0)r.slide.___onlayersReady()}).each(e.jqLoadFix)}if(e.browser.msie)this.$element.on("dragstart",function(e){e.preventDefault()})};t.loadImage=function(){var e=this;this.$element.preloadImg(this.img_src,function(t){e.slide.preloadCount--;if(e.slide.preloadCount===0)e.slide.___onlayersReady()})}})(jQuery);(function(e){window.MSVideoLayerElement=function(){MSLayerElement.call(this);this.__cssConfig.push("height");this.type="video"};MSVideoLayerElement.extend(MSLayerElement);var t=MSVideoLayerElement.prototype;var n=MSLayerElement.prototype;t.__playVideo=function(){if(this.img)CTween.fadeOut(this.img,500,false);CTween.fadeOut(this.video_btn,500,false);this.video_frame.attr("src","about:blank").css("display","block");if(this.video_url.indexOf("?")==-1)this.video_url+="?";this.video_frame.attr("src",this.video_url+"&autoplay=1")};t.start=function(){n.start.call(this);if(this.$element.data("autoplay")){this.__playVideo()}};t.reset=function(){n.reset.call(this);if(this.needPreload||this.$element.data("btn")){this.video_btn.css("opacity",1);this.video_frame.attr("src","about:blank").css("display","none")}if(this.needPreload){this.img.css("opacity",1);return}this.video_frame.attr("src",this.video_url)};t.create=function(){n.create.call(this);this.video_frame=this.$element.find("iframe").css({width:"100%",height:"100%"});this.video_url=this.video_frame.attr("src");var t=this.$element.has("img").length!=0;if(!t&&!this.$element.data("btn"))return;this.video_frame.attr("src","about:blank").css("display","none");var r=this;this.video_btn=e("<div></div>").appendTo(this.$element).addClass("ms-video-btn").click(function(){r.__playVideo()});if(!t)return;this.needPreload=true;this.img=this.$element.find("img:first").addClass("ms-video-img");if(this.img.data("src")!==undefined){this.img_src=this.img.data("src");this.img.removeAttr("data-src")}else{var r=this;this.img.attr("src",this.img_src).on("load",function(e){r.slide.preloadCount--;if(r.slide.preloadCount==0)r.slide.___onlayersReady()}).each(e.jqLoadFix)}if(e.browser.msie)this.img.on("dragstart",function(e){e.preventDefault()})};t.loadImage=function(){var e=this;this.img.preloadImg(this.img_src,function(t){e.slide.preloadCount--;if(e.slide.preloadCount==0)e.slide.___onlayersReady()})}})(jQuery);(function(e){"use strict";window.MSHotspotLayer=function(){MSLayerElement.call(this);this.__cssConfig=["margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","left","right","top","bottom"];this.ease="Expo";this.hide_start=true;this.type="hotspot"};MSHotspotLayer.extend(MSLayerElement);var t=MSHotspotLayer.prototype;var n=MSLayerElement.prototype;t._showTT=function(){if(!this.show_cl)return;clearTimeout(this.hto);if(this._tween)this._tween.stop(true);if(this.hide_start){this.align=this._orgAlign;this._locateTT();this.tt.css({display:"block"});this._tween=CTween.animate(this.tt,900,this.to,{ease:"easeOut"+this.ease});this.hide_start=false}};t._hideTT=function(){if(!this.show_cl)return;if(this._tween)this._tween.stop(true);var e=this;clearTimeout(this.hto);this.hto=setTimeout(function(){e.hide_start=true;e._tween=CTween.animate(e.tt,900,e.from,{ease:"easeOut"+e.ease,complete:function(){e.tt.css("display","none")}})},200)};t._updateClassName=function(e){if(this._lastClass)this.tt.removeClass(this._lastClass);this.tt.addClass(e);this._lastClass=e};t._alignPolicy=function(){var e=this.tt.outerHeight(false),t=Math.max(this.tt.outerWidth(false),parseInt(this.tt.css("max-width"))),n=window.innerWidth,r=window.innerHeight;switch(this.align){case"top":if(this.base_t<0)return"bottom";break;case"right":if(this.base_l+t>n||this.base_t<0)return"bottom";break;case"left":if(this.base_l<0||this.base_t<0)return"bottom";break}return null};t._locateTT=function(){var e=this.$element.offset(),t=this.slide.slider.$element.offset();var n=50,r=15;this.pos_x=e.left-t.left-this.slide.slider.$element.scrollLeft();this.pos_y=e.top-t.top-this.slide.slider.$element.scrollTop();this.from={opacity:0};this.to={opacity:1};this._updateClassName("ms-tooltip-"+this.align);this.tt_arrow.css("margin-left","");var i=15,s=15;switch(this.align){case"top":var o=Math.min(this.tt.outerWidth(false),parseInt(this.tt.css("max-width")));this.base_t=this.pos_y-this.tt.outerHeight(false)-s-r;this.base_l=this.pos_x-o/2;if(this.base_l+o>window.innerWidth){this.tt_arrow.css("margin-left",-i/2+this.base_l+o-window.innerWidth+"px");this.base_l=window.innerWidth-o}if(this.base_l<0){this.base_l=0;this.tt_arrow.css("margin-left",-i/2+this.pos_x-this.tt.outerWidth(false)/2+"px")}if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateY(-"+n+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.top=this.base_t-n+"px";this.to.top=this.base_t+"px"}break;case"bottom":var o=Math.min(this.tt.outerWidth(false),parseInt(this.tt.css("max-width")));this.base_t=this.pos_y+s+r;this.base_l=this.pos_x-o/2;if(this.base_l+o>window.innerWidth){this.tt_arrow.css("margin-left",-i/2+this.base_l+o-window.innerWidth+"px");this.base_l=window.innerWidth-o}if(this.base_l<0){this.base_l=0;this.tt_arrow.css("margin-left",-i/2+this.pos_x-this.tt.outerWidth(false)/2+"px")}if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateY("+n+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.top=this.base_t+n+"px";this.to.top=this.base_t+"px"}break;case"right":this.base_l=this.pos_x+i+r;this.base_t=this.pos_y-this.tt.outerHeight(false)/2;if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateX("+n+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.left=this.base_l+n+"px";this.to.left=this.base_l+"px"}break;case"left":this.base_l=this.pos_x-i-this.tt.outerWidth(false)-r;this.base_t=this.pos_y-this.tt.outerHeight(false)/2;if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateX(-"+n+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.left=this.base_l-n+"px";this.to.left=this.base_l+"px"}break}var u=this._alignPolicy();if(u!==null){this.align=u;this._locateTT();return}this.tt.css("top",parseInt(this.base_t)+"px").css("left",parseInt(this.base_l)+"px");this.tt.css(this.from)};t.start=function(){n.start.call(this);this.tt.appendTo(this.slide.slider.$element);this.tt.css("display","none")};t.reset=function(){n.reset.call(this);this.tt.detach()};t.create=function(){var t=this;n.create.call(this);this._orgAlign=this.align=this.$element.data("align")!==undefined?this.$element.data("align"):"top";this.data=this.$element.html();this.$element.html("").on("mouseenter",function(){t._showTT()}).on("mouseleave",function(){t._hideTT()});this.point=e('<div><div class="ms-point-center"></div><div class="ms-point-border"></div></div>').addClass("ms-tooltip-point").appendTo(this.$element);var r=this.$element.data("link"),i=this.$element.data("target");if(r){this.point.on("click",function(){window.open(r,i||"_self")})}this.tt=e("<div></div>").addClass("ms-tooltip").css("display","hidden").css("opacity",0);if(this.$element.data("width")!==undefined){this.tt.css("width",this.$element.data("width")).css("max-width",this.$element.data("width"))}this.tt_arrow=e("<div></div>").addClass("ms-tooltip-arrow").appendTo(this.tt);this._updateClassName("ms-tooltip-"+this.align);this.ttcont=e("<div></div>").addClass("ms-tooltip-cont").html(this.data).appendTo(this.tt);if(this.$element.data("stay-hover")===true){this.tt.on("mouseenter",function(){if(t.hide_start){return}clearTimeout(t.hto);t._tween.stop(true);t._showTT()}).on("mouseleave",function(){t._hideTT()})}}})(jQuery);(function(e){window.MSButtonLayer=function(){MSLayerElement.call(this);this.type="button"};MSButtonLayer.extend(MSLayerElement);var t=MSButtonLayer.prototype;var n=MSLayerElement.prototype;var r=["top","left","bottom","right"];t.create=function(){n.create.call(this);this.$element.wrap('<div class="ms-btn-container"></div>').css("position","relative");this.$container=this.$element.parent()};t.locate=function(){n.locate.call(this);var e,t;for(var i=0;i<4;i++){e=r[i];if(e in this.baseStyle){t=this.$element.css(e);this.$element.css(e,"");this.$container.css(e,t)}}this.$container.width(this.$element.outerWidth(true)).height(this.$element.outerHeight(true))}})(jQuery);window.MSSliderEvent=function(e){this.type=e};MSSliderEvent.CHANGE_START="ms_changestart";MSSliderEvent.CHANGE_END="ms_changeend";MSSliderEvent.WAITING="ms_waiting";MSSliderEvent.AUTOPLAY_CHANGE="ms_autoplaychange";MSSliderEvent.VIDEO_PLAY="ms_videoPlay";MSSliderEvent.VIDEO_CLOSE="ms_videoclose";MSSliderEvent.INIT="ms_init";MSSliderEvent.RESIZE="ms_resize";MSSliderEvent.RESERVED_SPACE_CHANGE="ms_rsc";MSSliderEvent.DESTROY="ms_destroy";(function(e){"use strict";window.MSSlide=function(){this.$element=null;this.$loading=e("<div></div>").addClass("ms-slide-loading");this.layers=[];this.view=null;this.index=-1;this.__width=0;this.__height=0;this.preloadCount=0;this.fillMode="fill";this.selected=false;this.pselected=false;this.autoAppend=true;this.isSleeping=true;this.moz=e.browser.mozilla};var t=MSSlide.prototype;t.onSwipeStart=function(){if(this.link)this.linkdis=true;if(this.video)this.videodis=true};t.onSwipeCancel=function(){if(this.link)this.linkdis=false;if(this.video)this.videodis=false};t.addLayer=function(t){if(!this.hasLayers)this.$layers=e("<div></div>").addClass("ms-slide-layers");this.hasLayers=true;this.$layers.append(t.$element);this.layers.push(t);t.slide=this;t.create();if(t.parallax){this.hasParallaxLayer=true}if(t.needPreload)this.preloadCount++};t.___onlayersReady=function(){this.ready=true;this.slider.api._startTimer();if(this.selected){this.showLayers();if(this.vinit){this.bgvideo.play();if(!this.autoPauseBgVid){this.bgvideo.currentTime=0}}}if(!this.isSleeping)this.setup();CTween.fadeOut(this.$loading,300,true);if((this.slider.options.preload===0||this.slider.options.preload==="all")&&this.index<this.view.slideList.length-1){this.view.slideList[this.index+1].loadImages()}else if(this.slider.options.preload==="all"&&this.index===this.view.slideList.length-1)this.slider._removeLoading()};t.startLayers=function(){for(var e=0,t=this.layers.length;e<t;++e)this.layers[e].start()};t.initLayers=function(e){if(this.init&&!e||this.slider.init_safemode)return;this.init=true;for(var t=0,n=this.layers.length;t<n;++t)this.layers[t].init()};t.locateLayers=function(){for(var e=0,t=this.layers.length;e<t;++e)this.layers[e].locate()};t.resetLayers=function(){this.$layers.css("display","none");this.$layers.css("opacity",1);for(var e=0,t=this.layers.length;e<t;++e)this.layers[e].reset()};t.hideLayers=function(){if(this.preloadCount!==0)return;for(var e=0,t=this.layers.length;e<t;++e)this.layers[e].hide()};t.showLayers=function(){if(!this.hasLayers)return;if(this.lht){if(this.lht.reset)this.lht.reset();else this.lht.stop("true")}this.resetLayers();this.$layers.css("opacity",1).css("display","");if(this.preloadCount===0){this.initLayers();this.locateLayers();this.startLayers()}};t.applyParallax=function(e,t,n){for(var r=0,i=this.layers.length;r!==i;++r){if(this.layers[r].parallax!=null){this.layers[r].moveParallax(e,t,n)}}};t.enableParallaxEffect=function(){if(!this.hasParallaxLayer){return}if(this.slider.options.parallaxMode==="swipe"){this.view.addEventListener(MSViewEvents.SCROLL,this.swipeParallaxMove,this)}else{this.$element.on("mousemove",{that:this},this.mouseParallaxMove).on("mouseleave",{that:this},this.resetParalax)}};t.disableParallaxEffect=function(){if(!this.hasParallaxLayer){return}if(this.slider.options.parallaxMode==="swipe"){this.view.removeEventListener(MSViewEvents.SCROLL,this.swipeParallaxMove,this)}else{this.$element.off("mousemove",this.mouseParallaxMove).off("mouseleave",this.resetParalax)}};t.resetParalax=function(e){var t=e.data.that;t.applyParallax(0,0)};t.mouseParallaxMove=function(e){var t=e.data.that,n=t.$element.offset(),r=t.slider;if(r.options.parallaxMode!=="mouse:y-only"){var i=e.clientX-n.left-t.__width/2}else{var i=0}if(r.options.parallaxMode!=="mouse:x-only"){var s=e.clientY-n.top-t.__height/2}else{var s=0}t.applyParallax(-i,-s)};t.swipeParallaxMove=function(e){var t=this.position-this.view.__contPos;this.applyParallax(t,0,true)};t.setBG=function(t){this.hasBG=true;var n=this;this.$imgcont=e("<div></div>").addClass("ms-slide-bgcont");this.$element.append(this.$loading).append(this.$imgcont);this.$bg_img=e(t).css("visibility","hidden");this.$imgcont.append(this.$bg_img);this.bgAligner=new MSAligner(n.fillMode,n.$imgcont,n.$bg_img);this.bgAligner.widthOnly=this.slider.options.autoHeight;if(n.slider.options.autoHeight&&(n.pselected||n.selected))n.slider.setHeight(n.slider.options.height);if(this.$bg_img.data("src")!==undefined){this.bg_src=this.$bg_img.data("src");this.$bg_img.removeAttr("data-src")}else{this.$bg_img.one("load",function(e){n._onBGLoad(e)}).each(e.jqLoadFix)}this.preloadCount++};t._onBGLoad=function(t){this.bgNatrualWidth=t.width;this.bgNatrualHeight=t.height;this.bgLoaded=true;if(e.browser.msie)this.$bg_img.on("dragstart",function(e){e.preventDefault()});this.preloadCount--;if(this.preloadCount===0){this.___onlayersReady()}};t.loadImages=function(){if(this.ls)return;this.ls=true;if(this.preloadCount===0){this.___onlayersReady()}if(this.bgvideo)this.bgvideo.load();if(this.hasBG&&this.bg_src){var e=this;this.$bg_img.preloadImg(this.bg_src,function(t){e._onBGLoad(t)})}for(var t=0,n=this.layers.length;t<n;++t){if(this.layers[t].needPreload)this.layers[t].loadImage()}};t.setBGVideo=function(t){if(!t[0].play)return;if(window._mobile){t.remove();return}this.bgvideo=t[0];var n=this;t.addClass("ms-slide-bgvideo");if(t.data("loop")!==false){this.bgvideo.addEventListener("ended",function(){n.bgvideo.play()})}if(t.data("mute")!==false){this.bgvideo.muted=true}if(t.data("autopause")===true){this.autoPauseBgVid=true}this.bgvideo_fillmode=t.data("fill-mode")||"fill";if(this.bgvideo_fillmode!=="none"){this.bgVideoAligner=new MSAligner(this.bgvideo_fillmode,this.$element,t);this.bgvideo.addEventListener("loadedmetadata",function(){if(n.vinit)return;n.vinit=true;n.video_aspect=n.bgVideoAligner.baseHeight/n.bgVideoAligner.baseWidth;n.bgVideoAligner.init(n.bgvideo.videoWidth,n.bgvideo.videoHeight);n._alignBGVideo();CTween.fadeIn(e(n.bgvideo),200);if(n.selected)n.bgvideo.play()})}t.css("opacity",0);this.$bgvideocont=e("<div></div>").addClass("ms-slide-bgvideocont").append(t);if(this.hasBG){this.$imgcont.before(this.$bgvideocont)}else{this.$bgvideocont.appendTo(this.$element)}};t._alignBGVideo=function(){if(!this.bgvideo_fillmode||this.bgvideo_fillmode==="none")return;this.bgVideoAligner.align()};t.setSize=function(e,t,n){this.__width=e;if(this.slider.options.autoHeight){if(this.bgLoaded){this.ratio=this.__width/this.bgWidth;t=Math.floor(this.ratio*this.bgHeight);this.$imgcont.height(t)}else{this.ratio=e/this.slider.options.width;t=this.slider.options.height*this.ratio}}this.__height=t;this.$element.width(e).height(t);if(this.hasBG&&this.bgLoaded)this.bgAligner.align();this._alignBGVideo();if(n&&this.selected)this.initLayers(n);if(this.selected)this.locateLayers();if(this.hasLayers){if(this.slider.options.autoHeight){this.$layers[0].style.height=this.getHeight()+"px"}if(this.slider.options.layersMode=="center")this.$layers[0].style.left=Math.max(0,(this.__width-this.slider.options.width)/2)+"px"}};t.getHeight=function(){if(this.hasBG&&this.bgLoaded)return this.bgHeight*this.ratio;return Math.max(this.$element[0].clientHeight,this.slider.options.height*this.ratio)};t.__playVideo=function(){if(this.vplayed||this.videodis)return;this.vplayed=true;if(!this.slider.api.paused){this.slider.api.pause();this.roc=true}this.vcbtn.css("display","");CTween.fadeOut(this.vpbtn,500,false);CTween.fadeIn(this.vcbtn,500);CTween.fadeIn(this.vframe,500);this.vframe.css("display","block").attr("src",this.video+"&autoplay=1");this.view.$element.addClass("ms-def-cursor");if(this.view.swipeControl){this.view.swipeControl.disable()}this.slider.slideController.dispatchEvent(new MSSliderEvent(MSSliderEvent.VIDEO_PLAY))};t.__closeVideo=function(){if(!this.vplayed)return;this.vplayed=false;if(this.roc)this.slider.api.resume();var e=this;CTween.fadeIn(this.vpbtn,500);CTween.animate(this.vcbtn,500,{opacity:0},{complete:function(){e.vcbtn.css("display","none")}});CTween.animate(this.vframe,500,{opacity:0},{complete:function(){e.vframe.attr("src","about:blank").css("display","none")}});if(this.view.swipeControl){this.view.swipeControl.enable()}this.view.$element.removeClass("ms-def-cursor");this.slider.slideController.dispatchEvent(new MSSliderEvent(MSSliderEvent.VIDEO_CLOSE))};t.create=function(){var t=this;if(this.hasLayers){this.$element.append(this.$layers);if(this.slider.options.layersMode=="center")this.$layers.css("max-width",this.slider.options.width+"px")}if(this.link){this.$element.css("cursor","pointer").click(function(){if(!t.linkdis)window.open(t.link,t.link_targ||"_self")})}if(this.video){if(this.video.indexOf("?")===-1)this.video+="?";this.vframe=e("<iframe></iframe>").addClass("ms-slide-video").css({width:"100%",height:"100%",display:"none"}).attr("src","about:blank").appendTo(this.$element);this.vpbtn=e("<div></div>").addClass("ms-slide-vpbtn").click(function(){t.__playVideo()}).appendTo(this.$element);this.vcbtn=e("<div></div>").addClass("ms-slide-vcbtn").click(function(){t.__closeVideo()}).appendTo(this.$element).css("display","none");if(window._touch){this.vcbtn.removeClass("ms-slide-vcbtn").addClass("ms-slide-vcbtn-mobile").append('<div class="ms-vcbtn-txt">Close video</div>').appendTo(this.view.$element.parent())}}if(!this.slider.options.autoHeight&&this.hasBG){this.$imgcont.css("height","100%");if(this.fillMode==="center"||this.fillMode==="stretch")this.fillMode="fill"}if(this.slider.options.autoHeight){this.$element.addClass("ms-slide-auto-height")}this.sleep(true)};t.destroy=function(){for(var e=0,t=this.layers.length;e<t;++e)this.layers[e].$element.stop(true).remove();this.$element.remove();this.$element=null};t.setup=function(){if(!this.initBG&&this.bgLoaded){this.initBG=true;this.$bg_img.css("visibility","");this.bgWidth=this.bgNatrualWidth||this.$bg_img.width();this.bgHeight=this.bgNatrualHeight||this.$bg_img.height();CTween.fadeIn(this.$imgcont,300);if(this.slider.options.autoHeight)this.$imgcont.height(this.bgHeight*this.ratio);this.bgAligner.init(this.bgWidth,this.bgHeight);this.setSize(this.__width,this.__height);if(this.slider.options.autoHeight&&(this.pselected||this.selected))this.slider.setHeight(this.getHeight())}};t.prepareToSelect=function(){if(this.pselected||this.selected)return;this.pselected=true;if(this.link||this.video){this.view.addEventListener(MSViewEvents.SWIPE_START,this.onSwipeStart,this);this.view.addEventListener(MSViewEvents.SWIPE_CANCEL,this.onSwipeCancel,this)}this.loadImages();if(this.preloadCount===0){if(this.bgvideo){this.bgvideo.play()}if(this.slider.options.instantStartLayers){this.showLayers()}}this.enableParallaxEffect();if(this.moz){this.$element.css("margin-top","")}};t.select=function(){if(this.selected)return;this.selected=true;this.pselected=false;this.$element.addClass("ms-sl-selected");if(this.hasLayers){if(this.slider.options.autoHeight)this.$layers[0].style.height=this.getHeight()+"px";if(!this.slider.options.instantStartLayers){this.showLayers()}}if(this.preloadCount===0&&this.bgvideo){this.bgvideo.play()}if(this.videoAutoPlay){this.videodis=false;this.vpbtn.trigger("click")}};t.unselect=function(){this.pselected=false;if(this.moz)this.$element.css("margin-top","0.1px");if(this.link||this.video){this.view.removeEventListener(MSViewEvents.SWIPE_START,this.onSwipeStart,this);this.view.removeEventListener(MSViewEvents.SWIPE_CANCEL,this.onSwipeCancel,this)}if(this.bgvideo){this.bgvideo.pause();if(!this.autoPauseBgVid&&this.vinit)this.bgvideo.currentTime=0}if(this.hasLayers&&(this.selected||this.slider.options.instantStartLayers)){var e=this;e.lht=CTween.animate(this.$layers,500,{opacity:0},{complete:function(){e.resetLayers()}});this.disableParallaxEffect()}if(!this.selected)return;this.selected=false;this.$element.removeClass("ms-sl-selected");if(this.video&&this.vplayed){this.__closeVideo();this.roc=false}};t.sleep=function(e){if(this.isSleeping&&!e)return;this.isSleeping=true;if(this.autoAppend)this.$element.detach()};t.wakeup=function(){if(!this.isSleeping)return;this.isSleeping=false;if(this.autoAppend)this.view.$slideCont.append(this.$element);if(this.moz)this.$element.css("margin-top","0.1px");this.setup();if(this.hasBG)this.bgAligner.align()}})(jQuery);(function(e){"use strict";var t={};window.MSSlideController=function(e){this._delayProgress=0;this._timer=new averta.Timer(100);this._timer.onTimer=this.onTimer;this._timer.refrence=this;this.currentSlide=null;this.slider=e;this.so=e.options;averta.EventDispatcher.call(this)};MSSlideController.registerView=function(e,n){if(e in t){throw new Error(e+", is already registered.");return}t[e]=n};MSSlideController.SliderControlList={};MSSlideController.registerControl=function(e,t){if(e in MSSlideController.SliderControlList){throw new Error(e+", is already registered.");return}MSSlideController.SliderControlList[e]=t};var n=MSSlideController.prototype;n.setupView=function(){var n=this;this.resize_listener=function(){n.__resize()};var r={spacing:this.so.space,mouseSwipe:this.so.mouse,loop:this.so.loop,autoHeight:this.so.autoHeight,swipe:this.so.swipe,speed:this.so.speed,dir:this.so.dir,viewNum:this.so.inView,critMargin:this.so.critMargin};if(this.so.viewOptions)e.extend(r,this.so.viewOptions);if(this.so.autoHeight)this.so.heightLimit=false;var i=t[this.slider.options.view]||MSBasicView;if(i._3dreq&&(!window._css3d||e.browser.msie))i=i._fallback||MSBasicView;this.view=new i(r);if(this.so.overPause){var n=this;this.slider.$element.mouseenter(function(){n.is_over=true;n._stopTimer()}).mouseleave(function(){n.is_over=false;n._startTimer()})}};n.onChangeStart=function(){this.change_started=true;if(this.currentSlide)this.currentSlide.unselect();this.currentSlide=this.view.currentSlide;this.currentSlide.prepareToSelect();if(this.so.endPause&&this.currentSlide.index===this.slider.slides.length-1){this.pause();this.skipTimer()}if(this.so.autoHeight){this.slider.setHeight(this.currentSlide.getHeight())}this.dispatchEvent(new MSSliderEvent(MSSliderEvent.CHANGE_START))};n.onChangeEnd=function(){this.change_started=false;this._startTimer();this.currentSlide.select();if(this.so.preload>1){var e,t,n=this.so.preload-1;for(t=1;t<=n;++t){e=this.view.index+t;if(e>=this.view.slideList.length){if(this.so.loop){e=e-this.view.slideList.length}else{t=n;continue}}this.view.slideList[e].loadImages()}if(n>this.view.slideList.length/2)n=Math.floor(this.view.slideList.length/2);for(t=1;t<=n;++t){e=this.view.index-t;if(e<0){if(this.so.loop){e=this.view.slideList.length+e}else{t=n;continue}}this.view.slideList[e].loadImages()}}this.dispatchEvent(new MSSliderEvent(MSSliderEvent.CHANGE_END))};n.onSwipeStart=function(){this.skipTimer()};n.skipTimer=function(){this._timer.reset();this._delayProgress=0;this.dispatchEvent(new MSSliderEvent(MSSliderEvent.WAITING))};n.onTimer=function(e){if(this._timer.getTime()>=this.view.currentSlide.delay*1e3){this.skipTimer();this.view.next();this.hideCalled=false}this._delayProgress=this._timer.getTime()/(this.view.currentSlide.delay*10);if(this.so.hideLayers&&!this.hideCalled&&this.view.currentSlide.delay*1e3-this._timer.getTime()<=300){this.view.currentSlide.hideLayers();this.hideCalled=true}this.dispatchEvent(new MSSliderEvent(MSSliderEvent.WAITING))};n._stopTimer=function(){if(this._timer)this._timer.stop()};n._startTimer=function(){if(!this.paused&&!this.is_over&&this.currentSlide&&this.currentSlide.ready&&!this.change_started)this._timer.start()};n.__appendSlides=function(){var e,t,n=0,r=this.view.slideList.length-1;for(n;n<r;++n){e=this.view.slideList[n];if(!e.detached){e.$element.detach();e.detached=true}}this.view.appendSlide(this.view.slideList[this.view.index]);r=3;for(n=1;n<=r;++n){t=this.view.index+n;if(t>=this.view.slideList.length){if(this.so.loop){t=t-this.view.slideList.length}else{n=r;continue}}e=this.view.slideList[t];e.detached=false;this.view.appendSlide(e)}if(r>this.view.slideList.length/2)r=Math.floor(this.view.slideList.length/2);for(n=1;n<=r;++n){t=this.view.index-n;if(t<0){if(this.so.loop){t=this.view.slideList.length+t}else{n=r;continue}}e=this.view.slideList[t];e.detached=false;this.view.appendSlide(e)}};n.__resize=function(e){if(!this.created)return;this.width=this.slider.$element[0].clientWidth||this.so.width;if(!this.so.fullwidth){this.width=Math.min(this.width,this.so.width)}if(this.so.fullheight){this.so.heightLimit=false;this.so.autoHeight=false;this.height=this.slider.$element[0].clientHeight}else{this.height=this.width/this.slider.aspect}if(this.so.autoHeight){this.currentSlide.setSize(this.width,null,e);this.view.setSize(this.width,this.currentSlide.getHeight(),e)}else{this.view.setSize(this.width,this.so.heightLimit?Math.min(this.height,this.so.height):this.height,e)}if(this.slider.$controlsCont){if(this.so.centerControls&&this.so.fullwidth){this.view.$element.css("left",Math.min(0,-(this.slider.$element[0].clientWidth-this.so.width)/2)+"px")}}this.dispatchEvent(new MSSliderEvent(MSSliderEvent.RESIZE))};n.__dispatchInit=function(){this.dispatchEvent(new MSSliderEvent(MSSliderEvent.INIT))};n.setup=function(){this.created=true;this.paused=!this.so.autoplay;this.view.addEventListener(MSViewEvents.CHANGE_START,this.onChangeStart,this);this.view.addEventListener(MSViewEvents.CHANGE_END,this.onChangeEnd,this);this.view.addEventListener(MSViewEvents.SWIPE_START,this.onSwipeStart,this);this.currentSlide=this.view.slideList[this.so.start-1];this.__resize();this.view.create(this.so.start-1);if(this.so.preload===0)this.view.slideList[0].loadImages();this.scroller=this.view.controller;if(this.so.wheel){var t=this;var n=(new Date).getTime();this.wheellistener=function(e){var r=(new Date).getTime();if(r-n<350)return;n=r;var i=window.event||e.orginalEvent||e;var s=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));if(s<0)t.next();else if(s>0)t.previous();return false};if(e.browser.mozilla)this.slider.$element[0].addEventListener("DOMMouseScroll",this.wheellistener);else this.slider.$element.bind("mousewheel",this.wheellistener)}if(this.slider.$element[0].clientWidth===0)this.slider.init_safemode=true;this.__resize()};n.index=function(){return this.view.index};n.count=function(){return this.view.slidesCount};n.next=function(){this.skipTimer();this.view.next()};n.previous=function(){this.skipTimer();this.view.previous()};n.gotoSlide=function(e){e=Math.min(e,this.count()-1);this.skipTimer();this.view.gotoSlide(e)};n.destroy=function(e){this.slider.destroy(e);this.dispatchEvent(new MSSliderEvent(MSSliderEvent.DESTROY))};n._destroy=function(){this._timer.reset();this._timer=null;e(window).unbind("resize",this.resize_listener);this.view.destroy();this.view=null;if(this.so.wheel){if(e.browser.mozilla)this.slider.$element[0].removeEventListener("DOMMouseScroll",this.wheellistener);else this.slider.$element.unbind("mousewheel",this.wheellistener);this.wheellistener=null}this.so=null};n.runAction=function(e){var t=[];if(e.indexOf("(")!==-1){var n=e.slice(0,e.indexOf("("));t=e.slice(e.indexOf("(")+1,-1).replace(/\"|\'|\s/g,"").split(",");e=n}if(e in this){this[e].apply(this,t)}else if(console){console.log('Master Slider Error: Action "'+e+'" not found.')}};n.update=function(e){if(this.slider.init_safemode&&e)this.slider.init_safemode=false;this.__resize(e)};n.locate=function(){this.__resize()};n.resume=function(){if(!this.paused)return;this.paused=false;this._startTimer()};n.pause=function(){if(this.paused)return;this.paused=true;this._stopTimer()};n.currentTime=function(){return this._delayProgress};averta.EventDispatcher.extend(n)})(jQuery);(function(e){"use strict";var t={image:MSImageLayerElement,text:MSLayerElement,video:MSVideoLayerElement,hotspot:MSHotspotLayer,button:MSButtonLayer};window.MasterSlider=function(){this.options={autoplay:false,loop:false,mouse:true,swipe:true,grabCursor:true,space:0,fillMode:"fill",start:1,view:"basic",width:300,height:150,inView:15,critMargin:1,heightLimit:true,smoothHeight:true,autoHeight:false,fullwidth:false,fullheight:false,autofill:false,layersMode:"center",hideLayers:false,endPause:false,centerControls:true,overPause:true,shuffle:false,speed:17,dir:"h",preload:0,wheel:false,layout:"boxed",fullscreenMargin:0,instantStartLayers:false,parallaxMode:"mouse",rtl:false};this.slides=[];this.$element=null;this.lastMargin=0;this.leftSpace=0;this.topSpace=0;this.rightSpace=0;this.bottomSpace=0;var t=this;this.resize_listener=function(){t._resize()};e(window).bind("resize",this.resize_listener)};MasterSlider.author="Averta Ltd. (www.averta.net)";MasterSlider.version="2.0.0";MasterSlider.releaseDate="August 2014";var n=MasterSlider.prototype;n.__setupSlides=function(){var t=this,n,r=0;this.$element.children(".ms-slide").each(function(i){var s=e(this);n=new MSSlide;n.$element=s;n.slider=t;n.delay=s.data("delay")!==undefined?s.data("delay"):4;n.fillMode=s.data("fill-mode")!==undefined?s.data("fill-mode"):t.options.fillMode;n.index=r++;var o=s.children("img:not(.ms-layer)");if(o.length>0){n.setBG(o[0])}var u=s.children("video");if(u.length>0)n.setBGVideo(u);if(t.controls){for(var a=0,f=t.controls.length;a<f;++a)t.controls[a].slideAction(n)}var l=s.children("a").each(function(t){var r=e(this);if(this.getAttribute("data-type")==="video"){n.video=this.getAttribute("href");n.videoAutoPlay=r.data("autoplay");r.remove()}else if(!r.hasClass("ms-layer")){n.link=this.getAttribute("href");n.link_targ=this.getAttribute("target");r.remove()}});t.__createSlideLayers(n,s.find(".ms-layer"));t.slides.push(n);t.slideController.view.addSlide(n)})};n.__createSlideLayers=function(n,r){if(r.length==0)return;r.each(function(r,i){var s=e(this),o;if(i.nodeName==="A"&&s.find(">img").data("type")==="image"){o=e(this);s=o.find("img")}var u=new(t[s.data("type")||"text"]);u.$element=s;u.link=o;var a={},f={};if(s.data("effect")!==undefined)a.name=s.data("effect");if(s.data("ease")!==undefined)a.ease=s.data("ease");if(s.data("duration")!==undefined)a.duration=s.data("duration");if(s.data("delay")!==undefined)a.delay=s.data("delay");if(s.data("hide-effect"))f.name=s.data("hide-effect");if(s.data("hide-ease"))f.ease=s.data("hide-ease");if(s.data("hide-duration")!==undefined)f.duration=s.data("hide-duration");if(s.data("hide-time")!==undefined)f.time=s.data("hide-time");u.setStartAnim(a);u.setEndAnim(f);n.addLayer(u)})};n._removeLoading=function(){e(window).unbind("resize",this.resize_listener);this.$element.removeClass("before-init").css("visibility","visible").css("height","").css("opacity",0);CTween.fadeIn(this.$element);this.$loading.remove();if(this.slideController)this.slideController.__resize()};n._resize=function(e){if(this.$loading){var t=this.$loading[0].clientWidth/this.aspect;t=this.options.heightLimit?Math.min(t,this.options.height):t;this.$loading.height(t);this.$element.height(t)}};n._shuffleSlides=function(){var e=this.$element.children(".ms-slide"),t;for(var n=0,r=e.length;n<r;++n){t=Math.floor(Math.random()*(r-1));if(n!=t){this.$element[0].insertBefore(e[n],e[t]);e=this.$element.children(".ms-slide")}}};n._setupSliderLayout=function(){this._updateSideMargins();this.lastMargin=this.leftSpace;var t=this.options.layout;if(t!=="boxed"&&t!=="partialview"){this.options.fullwidth=true}if(t==="fullscreen"||t==="autofill"){this.options.fullheight=true}if(t==="partialview"){this.$element.addClass("ms-layout-partialview")}if(t==="fullscreen"||t==="fullwidth"){e(window).bind("resize",{that:this},this._updateLayout);this._updateLayout()}e(window).bind("resize",this.slideController.resize_listener)};n._updateLayout=function(t){var n=t?t.data.that:this,r=n.options.layout,i=n.$element;i.width(e("body").innerWidth()-n.leftSpace-n.rightSpace);var s=-i.offset().left+n.leftSpace+n.lastMargin;i.css("margin-left",s);n.lastMargin=s;if(r==="fullscreen"){i.height(window.innerHeight-n.options.fullscreenMargin-n.topSpace-n.bottomSpace)}};n._init=function(){if(this.preventInit)return;this.initialized=true;if(this.options.preload!=="all"){this._removeLoading()}if(this.options.shuffle)this._shuffleSlides();MSLayerEffects.setup();this.slideController.setupView();this.view=this.slideController.view;this.$controlsCont=e("<div></div>").addClass("ms-inner-controls-cont");if(this.options.centerControls){this.$controlsCont.css("max-width",this.options.width+"px")}this.$controlsCont.prepend(this.view.$element);this.$msContainer=e("<div></div>").addClass("ms-container").prependTo(this.$element).append(this.$controlsCont);if(this.controls){for(var t=0,n=this.controls.length;t<n;++t){this.controls[t].setup()}}this._setupSliderLayout();this.__setupSlides();this.slideController.setup();if(this.controls){for(t=0,n=this.controls.length;t<n;++t)this.controls[t].create()}if(this.options.autoHeight){this.slideController.view.$element.height(this.slideController.currentSlide.getHeight())}if(this.options.swipe&&!window._touch&&this.options.grabCursor&&this.options.mouse){var r=this.view.$element;r.mousedown(function(){r.removeClass("ms-grab-cursor");r.addClass("ms-grabbing-cursor")}).addClass("ms-grab-cursor");e(document).mouseup(function(){r.removeClass("ms-grabbing-cursor");r.addClass("ms-grab-cursor")})}this.slideController.__dispatchInit()};n.setHeight=function(e){if(this.options.smoothHeight){if(this.htween){if(this.htween.reset)this.htween.reset();else this.htween.stop(true)}this.htween=CTween.animate(this.slideController.view.$element,500,{height:e},{ease:"easeOutQuart"})}else this.slideController.view.$element.height(e)};n.reserveSpace=function(e,t){var n=e+"Space",r=this[n];this[n]+=t;this._updateSideMargins();return r};n._updateSideMargins=function(){this.$element.css("margin",this.topSpace+"px "+this.rightSpace+"px "+this.bottomSpace+"px "+this.leftSpace+"px")};n._realignControls=function(){this.rightSpace=this.leftSpace=this.topSpace=this.bottomSpace=0;this._updateSideMargins();this.api.dispatchEvent(new MSSliderEvent(MSSliderEvent.RESERVED_SPACE_CHANGE))};n.control=function(e,t){if(!(e in MSSlideController.SliderControlList))return;if(!this.controls)this.controls=[];var n=new MSSlideController.SliderControlList[e](t);n.slider=this;this.controls.push(n);return this};n.setup=function(t,n){if(typeof t==="string"){this.$element=e("#"+t)}else{this.$element=t.eq(0)}this.setupMarkup=this.$element.html();if(this.$element.length===0){return}this.$element.addClass("master-slider").addClass("before-init");if(e.browser.msie){this.$element.addClass("ms-ie").addClass("ms-ie"+e.browser.version.slice(0,e.browser.version.indexOf(".")))}var r=navigator.userAgent.toLowerCase();var i=r.indexOf("android")>-1;if(i){this.$element.addClass("ms-android")}var s=this;e.extend(this.options,n);this.aspect=this.options.width/this.options.height;this.$loading=e("<div></div>").addClass("ms-loading-container").insertBefore(this.$element).append(e("<div></div>").addClass("ms-loading"));this.$loading.parent().css("position","relative");if(this.options.autofill){this.options.fullwidth=true;this.options.fullheight=true}if(this.options.fullheight){this.$element.addClass("ms-fullheight")}this._resize();this.slideController=new MSSlideController(this);this.api=this.slideController;e(document).ready(function(){s._init()});return this};n.destroy=function(t){if(this.controls){for(var n=0,r=this.controls.length;n!==r;n++)this.controls[n].destroy()}if(this.slideController)this.slideController._destroy();if(this.$loading)this.$loading.remove();if(t)this.$element.html(this.setupMarkup).css("visibility","hidden");else this.$element.remove();var i=this.options.layout;if(i==="fullscreen"||i==="fullwidth"){e(window).unbind("resize",this._updateLayout)}this.view=null;this.slides=null;this.options=null;this.slideController=null;this.api=null;this.resize_listener=null}})(jQuery);(function(e,t,n,r){function o(t,n){this.element=t;this.$element=e(t);this.settings=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="masterslider",s={controls:{}};e.extend(o.prototype,{init:function(){var e=this;this._slider=new MasterSlider;for(var t in this.settings.controls){this._slider.control(t,this.settings.controls[t])}this._slider.setup(this.$element,this.settings);var n=this._slider.api.dispatchEvent;this._slider.api.dispatchEvent=function(t){e.$element.trigger(t.type);n.call(this,t)}},api:function(){return this._slider.api},slider:function(){return this._slider}});e.fn[i]=function(t){var n=arguments,s="plugin_"+i;if(t===r||typeof t==="object"){return this.each(function(){if(!e.data(this,s)){e.data(this,s,new o(this,t))}})}else if(typeof t==="string"&&t[0]!=="_"&&t!=="init"){var u;this.each(function(){var r=e.data(this,s);if(r instanceof o&&typeof r[t]==="function"){u=r[t].apply(r,Array.prototype.slice.call(n,1))}if(r instanceof o&&typeof r._slider.api[t]==="function"){u=r._slider.api[t].apply(r._slider.api,Array.prototype.slice.call(n,1))}if(t==="destroy"){e.data(this,s,null)}});return u!==r?u:this}}})(jQuery,window,document);window.MSViewEvents=function(e){this.type=e};MSViewEvents.SWIPE_START="swipeStart";MSViewEvents.SWIPE_END="swipeEnd";MSViewEvents.SWIPE_MOVE="swipeMove";MSViewEvents.SWIPE_CANCEL="swipeCancel";MSViewEvents.SCROLL="scoll";MSViewEvents.CHANGE_START="slideChangeStart";MSViewEvents.CHANGE_END="slideChangeEnd";(function(e){"use strict";window.MSBasicView=function(t){this.options={loop:false,dir:"h",autoHeight:false,spacing:5,mouseSwipe:true,swipe:true,speed:17,minSlideSpeed:2,viewNum:20,critMargin:1};e.extend(this.options,t);this.dir=this.options.dir;this.loop=this.options.loop;this.spacing=this.options.spacing;this.__width=0;this.__height=0;this.__cssProb=this.dir==="h"?"left":"top";this.__offset=this.dir==="h"?"offsetLeft":"offsetTop";this.__dimension=this.dir==="h"?"__width":"__height";this.__translate_end=window._css3d?" translateZ(0px)":"";this.$slideCont=e("<div></div>").addClass("ms-slide-container");this.$element=e("<div></div>").addClass("ms-view").addClass("ms-basic-view").append(this.$slideCont);this.currentSlide=null;this.index=-1;this.slidesCount=0;this.slides=[];this.slideList=[];this.viewSlidesList=[];this.css3=window._cssanim;this.start_buffer=0;this.firstslide_snap=0;this.controller=new Controller(0,0,{snapping:true,snapsize:100,paging:true,snappingMinSpeed:this.options.minSlideSpeed,friction:(100-this.options.speed*.5)/100,endless:this.loop});this.controller.renderCallback(this.dir==="h"?this._horizUpdate:this._vertiUpdate,this);this.controller.snappingCallback(this.__snapUpdate,this);this.controller.snapCompleteCallback(this.__snapCompelet,this);averta.EventDispatcher.call(this)};var t=MSBasicView.prototype;t.__snapCompelet=function(e,t){this.__locateSlides();this.start_buffer=0;this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_END))};t.__snapUpdate=function(t,n,r){if(this.loop){var i=this.index+r;this.updateLoop(i);if(i>=this.slidesCount)i=i-this.slidesCount;if(i<0)i=this.slidesCount+i;this.index=i}else{if(n<0||n>=this.slidesCount)return;this.index=n}this._checkCritMargins();if(e.browser.mozilla){this.slideList[this.index].$element[0].style.marginTop="0.1px";if(this.currentSlide){this.currentSlide.$element[0].style.marginTop=""}}var s=this.slideList[this.index];if(s===this.currentSlide)return;this.currentSlide=s;this.__updateSlidesZindex();this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_START))};t._checkCritMargins=function(){if(this.normalMode)return;var e=Math.floor(this.options.viewNum/2),t=this.viewSlidesList.indexOf(this.slideList[this.index]),n=this[this.__dimension]+this.spacing,r=this.options.critMargin;if(this.loop){if(t<=r||t>=this.viewSlidesList.length-r){n*=t-e;this.__locateSlides(false,n+this.start_buffer);this.start_buffer+=n}return}if(t<r&&this.index>=r||t>=this.viewSlidesList.length-r&&this.index<this.slidesCount-r){this.__locateSlides(false)}};t._vertiUpdate=function(e,t){this.__contPos=t;this.dispatchEvent(new MSViewEvents(MSViewEvents.SCROLL));if(this.css3){this.$slideCont[0].style[window._jcsspfx+"Transform"]="translateY("+ -t+"px)"+this.__translate_end;return}this.$slideCont[0].style.top=-t+"px"};t._horizUpdate=function(e,t){this.__contPos=t;this.dispatchEvent(new MSViewEvents(MSViewEvents.SCROLL));if(this.css3){this.$slideCont[0].style[window._jcsspfx+"Transform"]="translateX("+ -t+"px)"+this.__translate_end;return}this.$slideCont[0].style.left=-t+"px"};t.__updateViewList=function(){if(this.normalMode){this.viewSlidesList=this.slides;return}var e=this.viewSlidesList.slice();this.viewSlidesList=[];var t=0,n=Math.floor(this.options.viewNum/2),r;if(this.loop){for(;t!==this.options.viewNum;t++)this.viewSlidesList.push(this.slides[this.currentSlideLoc-n+t])}else{for(t=0;t!==n&&this.index-t!==-1;t++)this.viewSlidesList.unshift(this.slideList[this.index-t]);for(t=1;t!==n&&this.index+t!==this.slidesCount;t++)this.viewSlidesList.push(this.slideList[this.index+t])}for(t=0,r=e.length;t!==r;t++)if(this.viewSlidesList.indexOf(e[t])===-1)e[t].sleep();e=null;if(this.currentSlide){this.__updateSlidesZindex()}};t.__locateSlides=function(e,t){this.__updateViewList();t=!this.loop?this.slides.indexOf(this.viewSlidesList[0])*(this[this.__dimension]+this.spacing):t||0;var n=this.viewSlidesList.length,r;for(var i=0;i!==n;i++){var s=t+i*(this[this.__dimension]+this.spacing);r=this.viewSlidesList[i];r.wakeup();r.position=s;r.$element[0].style[this.__cssProb]=s+"px"}if(e!==false)this.controller.changeTo(this.slideList[this.index].position,false,null,null,false)};t.__createLoopList=function(){var e=[];var t=0,n=this.slidesCount/2;var r=this.slidesCount%2===0?n-1:Math.floor(n);var i=this.slidesCount%2===0?n:Math.floor(n);this.currentSlideLoc=r;for(t=1;t<=r;++t)e.unshift(this.slideList[this.index-t<0?this.slidesCount-t+this.index:this.index-t]);e.push(this.slideList[this.index]);for(t=1;t<=i;++t)e.push(this.slideList[this.index+t>=this.slidesCount?this.index+t-this.slidesCount:this.index+t]);return e};t.__getSteps=function(e,t){var n=t<e?this.slidesCount-e+t:t-e;var r=Math.abs(this.slidesCount-n);return n<r?n:-r};t.__pushEnd=function(){var e=this.slides.shift();var t=this.slides[this.slidesCount-2];this.slides.push(e);if(!this.normalMode)return;var n=t.$element[0][this.__offset]+this.spacing+this[this.__dimension];e.$element[0].style[this.__cssProb]=n+"px";e.position=n};t.__pushStart=function(){var e=this.slides.pop();var t=this.slides[0];this.slides.unshift(e);if(!this.normalMode)return;var n=t.$element[0][this.__offset]-this.spacing-this[this.__dimension];e.$element[0].style[this.__cssProb]=n+"px";e.position=n};t.__updateSlidesZindex=function(){if(!this.autoUpdateZIndex){return}var e,t=this.viewSlidesList.length,n=Math.floor(t/2);if(this.loop){var r=this.viewSlidesList.indexOf(this.currentSlide);for(var i=0;i!==t;i++){e=this.viewSlidesList[i];this.viewSlidesList[i].$element.css("z-index",i<=r?i+1:t-i)}}else{var s=this.currentSlide.index-this.viewSlidesList[0].index,o=t-s,u=s-o;for(var i=0;i!==t;i++){this.viewSlidesList[i].$element.css("z-index",i<=s?i+1:t-i)}this.currentSlide.$element.css("z-index",t)}};t.addSlide=function(e){e.view=this;this.slides.push(e);this.slideList.push(e);this.slidesCount++};t.appendSlide=function(e){this.$slideCont.append(e.$element)};t.updateLoop=function(e){if(this.loop){var t=this.__getSteps(this.index,e);for(var n=0,r=Math.abs(t);n<r;++n){if(t<0)this.__pushStart();else this.__pushEnd()}}};t.gotoSlide=function(e,t){this.updateLoop(e);this.index=e;var n=this.slideList[e];this._checkCritMargins();this.controller.changeTo(n.position,!t,null,null,false);if(n===this.currentSlide)return;this.currentSlide=n;this.__updateSlidesZindex();this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_START));if(t)this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_END))};t.next=function(){this.gotoSlide(this.index+1>=this.slidesCount?0:this.index+1)};t.previous=function(){this.gotoSlide(this.index-1<0?this.slidesCount-1:this.index-1)};t.setupSwipe=function(){this.swipeControl=new averta.TouchSwipe(this.$element);this.swipeControl.swipeType=this.dir==="h"?"horizontal":"vertical";var e=this;if(this.dir==="h"){this.swipeControl.onSwipe=function(t){e.horizSwipeMove(t)}}else{this.swipeControl.onSwipe=function(t){e.vertSwipeMove(t)}}};t.vertSwipeMove=function(e){var t=e.phase;if(t==="start"){this.controller.stop();this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_START))}else if(t==="move"&&(!this.loop||Math.abs(this.currentSlide.position-this.controller.value+e.moveY)<this.cont_size/2)){this.controller.drag(e.moveY)}else if(t==="end"||t==="cancel"){var n=e.distanceY/e.duration*50/3;if(Math.abs(n)>.1){this.controller.push(-n);if(n>this.controller.options.snappingMinSpeed)this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_END))}else{this.controller.cancel();this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_CANCEL))}}};t.horizSwipeMove=function(e){var t=e.phase;if(t==="start"){this.controller.stop();this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_START))}else if(t==="move"&&(!this.loop||Math.abs(this.currentSlide.position-this.controller.value+e.moveX)<this.cont_size/2)){this.controller.drag(e.moveX)}else if(t==="end"||t==="cancel"){var n=e.distanceX/e.duration*50/3;if(Math.abs(n)>.1){this.controller.push(-n);if(n>this.controller.options.snappingMinSpeed)this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_END))}else{this.controller.cancel();this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_CANCEL))}}};t.setSize=function(e,t,n){if(this.lastWidth===e&&t===this.lastHeight&&!n)return;this.$element.width(e).height(t);for(var r=0;r<this.slidesCount;++r)this.slides[r].setSize(e,t,n);this.__width=e;this.__height=t;if(this.__created){this.__locateSlides();this.cont_size=(this.slidesCount-1)*(this[this.__dimension]+this.spacing);if(!this.loop)this.controller._max_value=this.cont_size;this.controller.options.snapsize=this[this.__dimension]+this.spacing;this.controller.changeTo(this.currentSlide.position,false,null,null,false);this.controller.cancel();this.lastWidth=e;this.lastHeight=t}};t.create=function(e){this.__created=true;this.index=Math.min(e||0,this.slidesCount-1);if(this.loop)this.slides=this.__createLoopList();this.normalMode=this.slidesCount<=this.options.viewNum;for(var t=0;t<this.slidesCount;++t)this.slides[t].create();this.__locateSlides();this.controller.options.snapsize=this[this.__dimension]+this.spacing;if(!this.loop)this.controller._max_value=(this.slidesCount-1)*(this[this.__dimension]+this.spacing);this.gotoSlide(this.index,true);if(this.options.swipe&&(window._touch||this.options.mouseSwipe))this.setupSwipe()};t.destroy=function(){if(!this.__created)return;for(var e=0;e<this.slidesCount;++e)this.slides[e].destroy();this.slides=null;this.slideList=null;this.$element.remove();this.controller.destroy();this.controller=null};averta.EventDispatcher.extend(t);MSSlideController.registerView("basic",MSBasicView)})(jQuery);(function(e){"use strict";window.MSWaveView=function(e){MSBasicView.call(this,e);this.$element.removeClass("ms-basic-view").addClass("ms-wave-view");this.$slideCont.css(window._csspfx+"transform-style","preserve-3d");this.autoUpdateZIndex=true};MSWaveView.extend(MSBasicView);MSWaveView._3dreq=true;MSWaveView._fallback=MSBasicView;var t=MSWaveView.prototype;var n=MSBasicView.prototype;t._horizUpdate=function(e,t){n._horizUpdate.call(this,e,t);var r=-t;var i,s,o;for(var u=0;u<this.slidesCount;++u){s=this.slideList[u];o=-r-s.position;this.__updateSlidesHoriz(s,o)}};t._vertiUpdate=function(e,t){n._vertiUpdate.call(this,e,t);var r=-t;var i,s,o;for(var u=0;u<this.slidesCount;++u){s=this.slideList[u];o=-r-s.position;this.__updateSlidesVertic(s,o)}};t.__updateSlidesHoriz=function(e,t){var n=Math.abs(t*100/this.__width);e.$element.css(window._csspfx+"transform","translateZ("+ -n*3+"px) rotateY(0.01deg)")};t.__updateSlidesVertic=function(e,t){this.__updateSlidesHoriz(e,t)};MSSlideController.registerView("wave",MSWaveView)})(jQuery);(function(){window.MSFadeBasicView=function(e){MSWaveView.call(this,e);this.$element.removeClass("ms-wave-view").addClass("ms-fade-basic-view")};MSFadeBasicView.extend(MSWaveView);var e=MSFadeBasicView.prototype;var t=MSFadeBasicView.prototype;e.__updateSlidesHoriz=function(e,t){var n=Math.abs(t*.6/this.__width);n=1-Math.min(n,.6);e.$element.css("opacity",n)};e.__updateSlidesVertic=function(e,t){this.__updateSlidesHoriz(e,t)};MSSlideController.registerView("fadeBasic",MSFadeBasicView);MSWaveView._fallback=MSFadeBasicView})();(function(){window.MSFadeWaveView=function(e){MSWaveView.call(this,e);this.$element.removeClass("ms-wave-view").addClass("ms-fade-wave-view")};MSFadeWaveView.extend(MSWaveView);MSFadeWaveView._3dreq=true;MSFadeWaveView._fallback=MSFadeBasicView;var e=MSFadeWaveView.prototype;var t=MSWaveView.prototype;e.__updateSlidesHoriz=function(e,t){var n=Math.abs(t*100/this.__width);n=Math.min(n,100);e.$element.css("opacity",1-n/300);e.$element.css(window._csspfx+"transform","scale("+(1-n/800)+") rotateY(0.01deg) ")};e.__updateSlidesVertic=function(e,t){this.__updateSlidesHoriz(e,t)};MSSlideController.registerView("fadeWave",MSFadeWaveView)})();(function(e){"use strict";window.MSFlowView=function(e){MSWaveView.call(this,e);this.$element.removeClass("ms-wave-view").addClass("ms-flow-view")};MSFlowView.extend(MSWaveView);MSFlowView._3dreq=true;MSFlowView._fallback=MSFadeBasicView;var t=MSFlowView.prototype;var n=MSWaveView.prototype;t.__updateSlidesHoriz=function(e,t){var n=Math.abs(t*100/this.__width);var r=Math.min(n*.3,30)*(t<0?-1:1);var i=n*1.2;e.$element[0].style[window._jcsspfx+"Transform"]="translateZ("+ -i*5+"px) rotateY("+r+"deg) "};t.__updateSlidesVertic=function(e,t){var n=Math.abs(t*100/this.__width);var r=Math.min(n*.3,30)*(t<0?-1:1);var i=n*1.2;e.$element[0].style[window._jcsspfx+"Transform"]="translateZ("+ -i*5+"px) rotateX("+ -r+"deg) "};MSSlideController.registerView("flow",MSFlowView)})(jQuery);(function(){window.MSFadeFlowView=function(e){MSWaveView.call(this,e);this.$element.removeClass("ms-wave-view").addClass("ms-fade-flow-view")};MSFadeFlowView.extend(MSWaveView);MSFadeFlowView._3dreq=true;var e=MSFadeFlowView.prototype;var t=MSWaveView.prototype;e.__calculate=function(e){var t=Math.min(Math.abs(e*100/this.__width),100);var n=Math.min(t*.5,50)*(e<0?-1:1);return{value:t,rvalue:n}};e.__updateSlidesHoriz=function(e,t){var n=this.__calculate(t);e.$element.css("opacity",1-n.value/300);e.$element[0].style[window._csspfx+"transform"]="translateZ("+ -n.value+"px) rotateY("+n.rvalue+"deg) "};e.__updateSlidesVertic=function(e,t){var n=this.__calculate(t);e.$element.css("opacity",1-n.value/300);e.$element[0].style[window._csspfx+"transform"]="translateZ("+ -n.value+"px) rotateX("+ -n.rvalue+"deg) "};MSSlideController.registerView("fadeFlow",MSFadeFlowView)})();(function(e){"use strict";window.MSMaskView=function(e){MSBasicView.call(this,e);this.$element.removeClass("ms-basic-view").addClass("ms-mask-view")};MSMaskView.extend(MSBasicView);var t=MSMaskView.prototype;var n=MSBasicView.prototype;t.addSlide=function(t){t.view=this;t.$frame=e("<div></div>").addClass("ms-mask-frame").append(t.$element);t.$element[0].style.position="relative";t.autoAppend=false;this.slides.push(t);this.slideList.push(t);this.slidesCount++};t.setSize=function(e,t){var r=this.slides[0].slider;for(var i=0;i<this.slidesCount;++i){this.slides[i].$frame[0].style.width=e+"px";if(!r.options.autoHeight)this.slides[i].$frame[0].style.height=t+"px"}n.setSize.call(this,e,t)};t._horizUpdate=function(e,t){n._horizUpdate.call(this,e,t);var r=0;if(this.css3){for(r=0;r<this.slidesCount;++r){this.slideList[r].$element[0].style[window._jcsspfx+"Transform"]="translateX("+(t-this.slideList[r].position)+"px)"+this.__translate_end}return}for(r=0;r<this.slidesCount;++r){this.slideList[r].$element[0].style.left=t-this.slideList[r].position+"px"}};t._vertiUpdate=function(e,t){n._vertiUpdate.call(this,e,t);var r=0;if(this.css3){for(r=0;r<this.slidesCount;++r){this.slideList[r].$element[0].style[window._jcsspfx+"Transform"]="translateY("+(t-this.slideList[r].position)+"px)"+this.__translate_end}return}for(r=0;r<this.slidesCount;++r){this.slideList[r].$element[0].style.top=t-this.slideList[r].position+"px"}};t.__pushEnd=function(){var e=this.slides.shift();var t=this.slides[this.slidesCount-2];this.slides.push(e);if(!this.normalMode)return;var n=t.$frame[0][this.__offset]+this.spacing+this[this.__dimension];e.$frame[0].style[this.__cssProb]=n+"px";e.position=n};t.__pushStart=function(){var e=this.slides.pop();var t=this.slides[0];this.slides.unshift(e);if(!this.normalMode)return;var n=t.$frame[0][this.__offset]-this.spacing-this[this.__dimension];e.$frame[0].style[this.__cssProb]=n+"px";e.position=n};t.__updateViewList=function(){if(this.normalMode){this.viewSlidesList=this.slides;return}var e=this.viewSlidesList.slice();this.viewSlidesList=[];var t=0,n=Math.floor(this.options.viewNum/2),r;if(this.loop){for(;t!==this.options.viewNum;t++)this.viewSlidesList.push(this.slides[this.currentSlideLoc-n+t])}else{for(t=0;t!==n&&this.index-t!==-1;t++)this.viewSlidesList.unshift(this.slideList[this.index-t]);for(t=1;t!==n&&this.index+t!==this.slidesCount;t++)this.viewSlidesList.push(this.slideList[this.index+t])}for(t=0,r=e.length;t!==r;t++){if(this.viewSlidesList.indexOf(e[t])===-1){e[t].sleep();e[t].$frame.detach()}}e=null};t.__locateSlides=function(e,t){this.__updateViewList();t=!this.loop?this.slides.indexOf(this.viewSlidesList[0])*(this[this.__dimension]+this.spacing):t||0;var n=this.viewSlidesList.length,r;for(var i=0;i!==n;i++){var s=t+i*(this[this.__dimension]+this.spacing);r=this.viewSlidesList[i];this.$slideCont.append(r.$frame);r.wakeup(false);r.position=s;r.$frame[0].style[this.__cssProb]=s+"px"}if(e!==false)this.controller.changeTo(this.slideList[this.index].position,false,null,null,false)};MSSlideController.registerView("mask",MSMaskView)})(jQuery);(function(e){"use strict";window.MSFadeView=function(e){MSBasicView.call(this,e);this.$element.removeClass("ms-basic-view").addClass("ms-fade-view");this.controller.renderCallback(this.__update,this)};MSFadeView.extend(MSBasicView);var t=MSFadeView.prototype;var n=MSBasicView.prototype;t.__update=function(e,t){var n=-t;var r,i,s;for(var o=0;o<this.slidesCount;++o){i=this.slideList[o];s=-n-i.position;this.__updateSlides(i,s)}};t.__updateSlides=function(e,t){var n=Math.abs(t/this[this.__dimension]);if(1-n<=0){e.$element.fadeTo(0,0).css("visibility","hidden")}else{e.$element.fadeTo(0,1-n).css("visibility","")}};t.__locateSlides=function(e,t){this.__updateViewList();t=!this.loop?this.slides.indexOf(this.viewSlidesList[0])*(this[this.__dimension]+this.spacing):t||0;var n=this.viewSlidesList.length,r;for(var i=0;i!==n;i++){var s=t+i*this[this.__dimension];r=this.viewSlidesList[i];r.wakeup();r.position=s}if(e!==false)this.controller.changeTo(this.slideList[this.index].position,false,null,null,false)};t.__pushEnd=function(){var e=this.slides.shift();var t=this.slides[this.slidesCount-2];this.slides.push(e);e.position=t.position+this[this.__dimension]};t.__pushStart=function(){var e=this.slides.pop();var t=this.slides[0];this.slides.unshift(e);e.position=t.position-this[this.__dimension]};t.create=function(e){n.create.call(this,e);this.spacing=0;this.controller.options.minValidDist=10};MSSlideController.registerView("fade",MSFadeView)})(jQuery);(function(e){"use strict";window.MSScaleView=function(e){MSBasicView.call(this,e);this.$element.removeClass("ms-basic-view").addClass("ms-scale-view");this.controller.renderCallback(this.__update,this)};MSScaleView.extend(MSFadeView);var t=MSScaleView.prototype;var n=MSFadeView.prototype;t.__updateSlides=function(e,t){var n=Math.abs(t/this[this.__dimension]),r=e.$element[0];if(1-n<=0){r.style.opacity=0;r.style.visibility="hidden";r.style[window._jcsspfx+"Transform"]=""}else{r.style.opacity=1-n;r.style.visibility="";r.style[window._jcsspfx+"Transform"]="perspective(2000px) translateZ("+n*(t<0?-.5:.5)*300+"px)"}};t.create=function(e){n.create.call(this,e);this.controller.options.minValidDist=.03};MSSlideController.registerView("scale",MSScaleView)})(jQuery);(function(){"use strict";var e=2e3;window.MSFocusView=function(e){MSWaveView.call(this,e);this.$element.removeClass("ms-wave-view").addClass("ms-focus-view");this.options.centerSpace=this.options.centerSpace||1};MSFocusView.extend(MSWaveView);MSFocusView._3dreq=true;MSFocusView._fallback=MSFadeBasicView;var t=MSFocusView.prototype;var n=MSWaveView.prototype;t.__calcview=function(t,n){var r=n/2*t/(t+e);return r*(t+e)/e};t.__updateSlidesHoriz=function(e,t){var n=Math.abs(t*100/this.__width);n=-Math.min(n,100)*15;e.$element.css(window._csspfx+"transform","translateZ("+n+"px) rotateY(0.01deg) translateX("+(t<0?1:-1)*-this.__calcview(n,this.__width)*this.options.centerSpace+"px)")};t.__updateSlidesVertic=function(e,t){var n=Math.abs(t*100/this.__width);n=-Math.min(n,100)*15;e.$element.css(window._csspfx+"transform","translateZ("+n+"px) rotateY(0.01deg) translateY("+(t<0?1:-1)*-this.__calcview(n,this.__width)*this.options.centerSpace+"px)")};MSSlideController.registerView("focus",MSFocusView)})();(function(){window.MSPartialWaveView=function(e){MSWaveView.call(this,e);this.$element.removeClass("ms-wave-view").addClass("ms-partial-wave-view")};MSPartialWaveView.extend(MSWaveView);MSPartialWaveView._3dreq=true;MSPartialWaveView._fallback=MSFadeBasicView;var e=MSPartialWaveView.prototype;var t=MSWaveView.prototype;e.__updateSlidesHoriz=function(e,t){var n=Math.abs(t*100/this.__width);if(e.hasBG){e.$bg_img.css("opacity",(100-Math.abs(t*120/this.__width/3))/100)}e.$element.css(window._csspfx+"transform","translateZ("+ -n*3+"px) rotateY(0.01deg) translateX("+t*.75+"px)")};e.__updateSlidesVertic=function(e,t){var n=Math.abs(t*100/this.__width);if(e.hasBG){e.$bg_img.css("opacity",(100-Math.abs(t*120/this.__width/3))/100)}e.$element.css(window._csspfx+"transform","translateZ("+ -n*3+"px) rotateY(0.01deg) translateY("+t*.75+"px)")};MSSlideController.registerView("partialWave",MSPartialWaveView)})();(function(e){"use strict";var t=function(){this.options={prefix:"ms-",autohide:true,overVideo:true}};var n=t.prototype;n.slideAction=function(e){};n.setup=function(){this.cont=this.options.insertTo?e(this.options.insertTo):this.slider.$controlsCont;if(!this.options.overVideo)this._hideOnvideoStarts();if(this.options.hideUnder){e(window).bind("resize",{that:this},this.onResize);this.onResize();this.needsRealign=!this.options.insetTo&&(this.options.align==="left"||this.options.align==="right")&&this.options.inset===false}};n.onResize=function(e){var t=e&&e.data.that||this;var n=window.innerWidth;if(n<=t.options.hideUnder&&!t.detached){t.hide(true);t.detached=true;t.onDetach()}else if(n>=t.options.hideUnder&&t.detached){t.detached=false;t.visible();t.onAppend()}};n.create=function(){var t=this;if(this.options.autohide&&!window._touch){this.hide(true);this.slider.$controlsCont.mouseenter(function(){if(!t._disableAH&&!t.mdown)t.visible();t.mleave=false}).mouseleave(function(){t.mleave=true;if(!t.mdown)t.hide()}).mousedown(function(){t.mdown=true});e(document).mouseup(function(){if(t.mdown&&t.mleave)t.hide();t.mdown=false})}};n.onAppend=function(){if(this.needsRealign){this.slider._realignControls()}};n.onDetach=function(){if(this.needsRealign){this.slider._realignControls()}};n._hideOnvideoStarts=function(){var e=this;slider.api.addEventListener(MSSliderEvent.VIDEO_PLAY,function(){e._disableAH=true;e.hide()});slider.api.addEventListener(MSSliderEvent.VIDEO_CLOSE,function(){e._disableAH=false;e.visible()})};n.hide=function(e){if(e){this.$element.css("opacity",0);this.$element.css("display","none")}else{CTween.fadeOut(this.$element,400,false)}this.$element.addClass("ms-ctrl-hide")};n.visible=function(){if(this.detached)return;this.$element.css("display","");CTween.fadeIn(this.$element,400);this.$element.removeClass("ms-ctrl-hide")};n.destroy=function(){if(this.options&&this.options.hideUnder){e(window).unbind("resize",this.onResize)}};window.BaseControl=t})(jQuery);(function(e){"use strict";var t=function(t){BaseControl.call(this);e.extend(this.options,t)};t.extend(BaseControl);var n=t.prototype;var r=BaseControl.prototype;n.setup=function(){var t=this;this.$next=e("<div></div>").addClass(this.options.prefix+"nav-next").bind("click",function(){if(!t.slider.options.loop&&t.slider.api.index()===t.slider.api.count()-1)t.slider.view.controller.bounce(10);else t.slider.api.next()});this.$prev=e("<div></div>").addClass(this.options.prefix+"nav-prev").bind("click",function(){if(!t.slider.options.loop&&t.slider.api.index()===0)t.slider.view.controller.bounce(-10);else t.slider.api.previous()});r.setup.call(this);this.cont.append(this.$next);this.cont.append(this.$prev)};n.hide=function(e){if(e){this.$prev.css("opacity",0).css("display","none");this.$next.css("opacity",0).css("display","none");return}CTween.fadeOut(this.$prev,400,false);CTween.fadeOut(this.$next,400,false);this.$prev.addClass("ms-ctrl-hide");this.$next.addClass("ms-ctrl-hide")};n.visible=function(){if(this.detached)return;CTween.fadeIn(this.$prev,400);CTween.fadeIn(this.$next,400);this.$prev.removeClass("ms-ctrl-hide").css("display","");this.$next.removeClass("ms-ctrl-hide").css("display","")};n.destroy=function(){r.destroy();this.$next.remove();this.$prev.remove()};window.MSArrows=t;MSSlideController.registerControl("arrows",t)})(jQuery);(function(e){"use strict";var t=function(t){BaseControl.call(this);this.options.dir="h";this.options.wheel=t.dir==="v";this.options.arrows=true;this.options.speed=17;this.options.align=null;this.options.inset=false;this.options.margin=10;this.options.space=10;this.options.width=100;this.options.height=100;this.options.type="thumbs";e.extend(this.options,t);this.thumbs=[];this.index_count=0;this.__dimen=this.options.dir==="h"?"width":"height";this.__alignsize=this.options.dir==="h"?"height":"width";this.__jdimen=this.options.dir==="h"?"outerWidth":"outerHeight";this.__pos=this.options.dir==="h"?"left":"top";this.click_enable=true};t.extend(BaseControl);var n=t.prototype;var r=BaseControl.prototype;n.setup=function(){this.$element=e("<div></div>").addClass(this.options.prefix+"thumb-list");if(this.options.type==="tabs"){this.$element.addClass(this.options.prefix+"tabs")}this.$element.addClass("ms-dir-"+this.options.dir);r.setup.call(this);if(this.slider.$controlsCont===this.cont){this.$element.appendTo(this.slider.$element)}else{this.$element.appendTo(this.cont)}this.$thumbscont=e("<div></div>").addClass("ms-thumbs-cont").appendTo(this.$element);if(this.options.arrows){var t=this;this.$fwd=e("<div></div>").addClass("ms-thumblist-fwd").appendTo(this.$element).click(function(){t.controller.push(-15)});this.$bwd=e("<div></div>").addClass("ms-thumblist-bwd").appendTo(this.$element).click(function(){t.controller.push(15)})}if(!this.options.insetTo&&this.options.align){var n=this.options.align;if(this.options.inset){this.$element.css(n,this.options.margin)}else if(n==="top"){this.$element.detach().prependTo(this.slider.$element).css({"margin-bottom":this.options.margin,position:"relative"})}else if(n==="bottom"){this.$element.css({"margin-top":this.options.margin,position:"relative"})}else{this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.align()}if(this.options.dir==="v"){this.$element.width(this.options.width)}else{this.$element.height(this.options.height)}}};n.align=function(e){if(this.detached){return}var t=this.options.align;var n=this.slider.reserveSpace(t,this.options[this.__alignsize]+this.options.margin*2);this.$element.css(t,-n-this.options[this.__alignsize]-this.options.margin)};n.slideAction=function(t){var n=e(t.$element.find(".ms-thumb"));var r=this;var i=e("<div></div>").addClass("ms-thumb-frame").append(n).append(e('<div class="ms-thumb-ol"></div>')).bind("click",function(){r.changeSlide(i)});if(this.options.align){i.width(this.options.width).height(this.options.height).css("margin-"+(this.options.dir==="v"?"bottom":"right"),this.options.space)}i[0].index=this.index_count++;this.$thumbscont.append(i);if(this.options.fillMode&&n.is("img")){var s=new window.MSAligner(this.options.fillMode,i,n);n[0].aligner=s;n.one("load",function(t){var n=e(this);n[0].aligner.init(n.width(),n.height());n[0].aligner.align()}).each(e.jqLoadFix)}if(e.browser.msie)n.on("dragstart",function(e){e.preventDefault()});this.thumbs.push(i)};n.create=function(){r.create.call(this);this.__translate_end=window._css3d?" translateZ(0px)":"";this.controller=new Controller(0,0,{snappingMinSpeed:2,friction:(100-this.options.speed*.5)/100});this.controller.renderCallback(this.options.dir==="h"?this._hMove:this._vMove,this);var t=this;this.resize_listener=function(){t.__resize()};e(window).bind("resize",this.resize_listener);this.thumbSize=this.thumbs[0][this.__jdimen](true);this.setupSwipe();this.__resize();var t=this;if(this.options.wheel){this.wheellistener=function(e){var n=window.event||e.orginalEvent||e;var r=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail));t.controller.push(-r*10);return false};if(e.browser.mozilla)this.$element[0].addEventListener("DOMMouseScroll",this.wheellistener);else this.$element.bind("mousewheel",this.wheellistener)}this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,this.update,this);this.cindex=this.slider.api.index();this.select(this.thumbs[this.cindex])};n._hMove=function(e,t){this.__contPos=t;if(window._cssanim){this.$thumbscont[0].style[window._jcsspfx+"Transform"]="translateX("+ -t+"px)"+this.__translate_end;return}this.$thumbscont[0].style.left=-t+"px"};n._vMove=function(e,t){this.__contPos=t;if(window._cssanim){this.$thumbscont[0].style[window._jcsspfx+"Transform"]="translateY("+ -t+"px)"+this.__translate_end;return}this.$thumbscont[0].style.top=-t+"px"};n.setupSwipe=function(){this.swipeControl=new averta.TouchSwipe(this.$element);this.swipeControl.swipeType=this.options.dir==="h"?"horizontal":"vertical";var e=this;if(this.options.dir==="h")this.swipeControl.onSwipe=function(t){e.horizSwipeMove(t)};else this.swipeControl.onSwipe=function(t){e.vertSwipeMove(t)}};n.vertSwipeMove=function(e){if(this.dTouch)return;var t=e.phase;if(t==="start")this.controller.stop();else if(t==="move")this.controller.drag(e.moveY);else if(t==="end"||t==="cancel"){var n=Math.abs(e.distanceY/e.duration*50/3);if(n>.1){this.controller.push(-e.distanceY/e.duration*50/3)}else{this.click_enable=true;this.controller.cancel()}}};n.horizSwipeMove=function(e){if(this.dTouch)return;var t=e.phase;if(t==="start"){this.controller.stop();this.click_enable=false}else if(t==="move")this.controller.drag(e.moveX);else if(t==="end"||t==="cancel"){var n=Math.abs(e.distanceX/e.duration*50/3);if(n>.1){this.controller.push(-e.distanceX/e.duration*50/3)}else{this.click_enable=true;this.controller.cancel()}}};n.update=function(){var e=this.slider.api.index();if(this.cindex===e)return;if(this.cindex!=null)this.unselect(this.thumbs[this.cindex]);this.cindex=e;this.select(this.thumbs[this.cindex]);if(!this.dTouch)this.updateThumbscroll()};n.updateThumbscroll=function(){var e;var t=this.thumbSize*this.cindex;if(this.controller.value==NaN)this.controller.value=0;if(t-this.controller.value<0){this.controller.gotoSnap(this.cindex,true);return}if(t+this.thumbSize-this.controller.value>this.$element[this.__dimen]()){var n=this.cindex-Math.floor(this.$element[this.__dimen]()/this.thumbSize)+1;this.controller.gotoSnap(n,true);return}};n.changeSlide=function(e){if(!this.click_enable||this.cindex===e[0].index)return;this.slider.api.gotoSlide(e[0].index)};n.unselect=function(e){e.removeClass("ms-thumb-frame-selected")};n.select=function(e){e.addClass("ms-thumb-frame-selected")};n.__resize=function(){var e=this.$element[this.__dimen]();if(this.ls===e)return;this.ls=e;this.thumbSize=this.thumbs[0][this.__jdimen](true);var t=this.slider.api.count()*this.thumbSize;this.$thumbscont[0].style[this.__dimen]=t+"px";if(t<=e){this.dTouch=true;this.controller.stop();this.$thumbscont[0].style[this.__pos]=(e-t)*.5+"px";this.$thumbscont[0].style[window._jcsspfx+"Transform"]=""}else{this.dTouch=false;this.click_enable=true;this.$thumbscont[0].style[this.__pos]="";this.controller._max_value=t-e;this.controller.options.snapsize=this.thumbSize;this.updateThumbscroll()}};n.destroy=function(){r.destroy();if(this.options.wheel){if(e.browser.mozilla)this.$element[0].removeEventListener("DOMMouseScroll",this.wheellistener);else this.$element.unbind("mousewheel",this.wheellistener);this.wheellistener=null}e(window).unbind("resize",this.resize_listener);this.$element.remove();this.slider.api.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.slider.api.removeEventListener(MSSliderEvent.CHANGE_START,this.update,this)};window.MSThumblist=t;MSSlideController.registerControl("thumblist",t)})(jQuery);(function(e){"use strict";var t=function(t){BaseControl.call(this);this.options.dir="h";this.options.inset=true;this.options.margin=10;e.extend(this.options,t);this.bullets=[]};t.extend(BaseControl);var n=t.prototype;var r=BaseControl.prototype;n.setup=function(){r.setup.call(this);this.$element=e("<div></div>").addClass(this.options.prefix+"bullets").addClass("ms-dir-"+this.options.dir).appendTo(this.cont);this.$bullet_cont=e("<div></div>").addClass("ms-bullets-count").appendTo(this.$element);if(!this.options.insetTo&&this.options.align){this.$element.css({top:"auto",bottom:"auto"});var t=this.options.align;if(this.options.inset){this.$element.css(t,this.options.margin)}}};n.create=function(){r.create.call(this);var t=this;this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,this.update,this);this.cindex=this.slider.api.index();for(var n=0;n<this.slider.api.count();++n){var i=e("<div></div>").addClass("ms-bullet");i[0].index=n;i.on("click",function(){t.changeSlide(this.index)});this.$bullet_cont.append(i);this.bullets.push(i)}if(this.options.dir==="h")this.$element.width(i.outerWidth(true)*this.slider.api.count());this.select(this.bullets[this.cindex])};n.update=function(){var e=this.slider.api.index();if(this.cindex===e)return;if(this.cindex!=null)this.unselect(this.bullets[this.cindex]);this.cindex=e;this.select(this.bullets[this.cindex])};n.changeSlide=function(e){if(this.cindex===e)return;this.slider.api.gotoSlide(e)};n.unselect=function(e){e.removeClass("ms-bullet-selected")};n.select=function(e){e.addClass("ms-bullet-selected")};n.destroy=function(){r.destroy();this.slider.api.removeEventListener(MSSliderEvent.CHANGE_START,this.update,this);this.$element.remove()};window.MSBulltes=t;MSSlideController.registerControl("bullets",t)})(jQuery);(function(e){"use strict";var t=function(t){BaseControl.call(this);this.options.dir="h";this.options.autohide=true;this.options.width=4;this.options.color="#3D3D3D";this.options.margin=10;e.extend(this.options,t);this.__dimen=this.options.dir==="h"?"width":"height";this.__jdimen=this.options.dir==="h"?"outerWidth":"outerHeight";this.__pos=this.options.dir==="h"?"left":"top";this.__translate_end=window._css3d?" translateZ(0px)":"";this.__translate_start=this.options.dir==="h"?" translateX(":"translateY("};t.extend(BaseControl);var n=t.prototype;var r=BaseControl.prototype;n.setup=function(){this.$element=e("<div></div>").addClass(this.options.prefix+"sbar").addClass("ms-dir-"+this.options.dir);r.setup.call(this);if(this.slider.$controlsCont===this.cont){this.$element.appendTo(this.slider.$element)}else{this.$element.appendTo(this.cont)}this.$bar=e("<div></div>").addClass(this.options.prefix+"bar").appendTo(this.$element);if(this.slider.options.loop){console.log("WARNING, MSScrollbar cannot work with looped slider.");this.disable=true;this.$element.remove()}if(this.options.dir==="v"){this.$bar.width(this.options.width)}else{this.$bar.height(this.options.width)}this.$bar.css("background-color",this.options.color);if(!this.options.insetTo&&this.options.align){if(this.options.dir==="v"){this.$element.css({right:"auto",left:"auto"})}else{this.$element.css({top:"auto",bottom:"auto"})}var t=this.options.align;if(this.options.inset){this.$element.css(t,this.options.margin)}else if(t==="top"){this.$element.prependTo(this.slider.$element).css({"margin-bottom":this.options.margin,position:"relative"})}else if(t==="bottom"){this.$element.css({"margin-top":this.options.margin,position:"relative"})}else{this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.align()}}};n.align=function(e){if(this.detached){return}var t=this.options.align;var n=this.slider.reserveSpace(t,this.options.margin*2+this.options.width);this.$element.css(t,-n-this.options.margin-this.options.width)};n.create=function(){if(this.disable)return;var e=this;this.scroller=this.slider.api.scroller;this.slider.api.view.addEventListener(MSViewEvents.SCROLL,this._update,this);this.slider.api.addEventListener(MSSliderEvent.RESIZE,this._resize,this);this._resize();if(this.options.autohide){this.$bar.css("opacity","0")}};n._resize=function(){this.vdimen=this.$element[this.__dimen]();this.bar_dimen=this.slider.api.view["__"+this.__dimen]*this.vdimen/this.scroller._max_value;this.$bar[this.__dimen](this.bar_dimen)};n._update=function(){var e=this.scroller.value*(this.vdimen-this.bar_dimen)/this.scroller._max_value;if(this.lvalue===e)return;this.lvalue=e;if(this.options.autohide){clearTimeout(this.hto);this.$bar.css("opacity","1");var t=this;this.hto=setTimeout(function(){t.$bar.css("opacity","0")},150)}if(e<0){this.$bar[0].style[this.__dimen]=this.bar_dimen+e+"px";return}if(e>this.vdimen-this.bar_dimen)this.$bar[0].style[this.__dimen]=this.vdimen-e+"px";if(window._cssanim){this.$bar[0].style[window._jcsspfx+"Transform"]=this.__translate_start+e+"px)"+this.__translate_end;return}this.$bar[0].style[this.__pos]=e+"px"};n.destroy=function(){r.destroy();this.slider.api.view.removeEventListener(MSViewEvents.SCROLL,this._update,this);this.slider.api.removeEventListener(MSSliderEvent.RESIZE,this._resize,this);this.slider.api.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.$element.remove()};window.MSScrollbar=t;MSSlideController.registerControl("scrollbar",t)})(jQuery);(function(e){"use strict";var t=function(t){BaseControl.call(this);this.options.autohide=false;this.options.width=4;this.options.color="#FFFFFF";this.options.inset=true;this.options.margin=0;e.extend(this.options,t)};t.extend(BaseControl);var n=t.prototype;var r=BaseControl.prototype;n.setup=function(){var t=this;r.setup.call(this);this.$element=e("<div></div>").addClass(this.options.prefix+"timerbar");r.setup.call(this);if(this.slider.$controlsCont===this.cont){this.$element.appendTo(this.slider.$element)}else{this.$element.appendTo(this.cont)}this.$bar=e("<div></div>").addClass("ms-time-bar").appendTo(this.$element);if(this.options.dir==="v"){this.$bar.width(this.options.width);this.$element.width(this.options.width)}else{this.$bar.height(this.options.width);this.$element.height(this.options.width)}this.$bar.css("background-color",this.options.color);if(!this.options.insetTo&&this.options.align){this.$element.css({top:"auto",bottom:"auto"});var n=this.options.align;if(this.options.inset){this.$element.css(n,this.options.margin)}else if(n==="top"){this.$element.prependTo(this.slider.$element).css({"margin-bottom":this.options.margin,position:"relative"})}else if(n==="bottom"){this.$element.css({"margin-top":this.options.margin,position:"relative"})}else{this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.align()}}};n.align=function(e){if(this.detached){return}var t=this.options.align;var n=this.slider.reserveSpace(t,this.options.margin*2+this.options.width);this.$element.css(t,-n-this.options.margin-this.options.width)};n.create=function(){r.create.call(this);this.slider.api.addEventListener(MSSliderEvent.WAITING,this._update,this);this._update()};n._update=function(){this.$bar[0].style.width=this.slider.api._delayProgress+"%"};n.destroy=function(){r.destroy();this.slider.api.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.slider.api.removeEventListener(MSSliderEvent.WAITING,this._update,this);this.$element.remove()};window.MSTimerbar=t;MSSlideController.registerControl("timebar",t)})(jQuery);(function(e){"use strict";var t=function(t){BaseControl.call(this);this.options.color="#A2A2A2";this.options.stroke=10;this.options.radius=4;this.options.autohide=false;e.extend(this.options,t)};t.extend(BaseControl);var n=t.prototype;var r=BaseControl.prototype;n.setup=function(){var t=this;r.setup.call(this);this.$element=e("<div></div>").addClass(this.options.prefix+"ctimer").appendTo(this.cont);this.$canvas=e("<canvas></canvas>").addClass("ms-ctimer-canvas").appendTo(this.$element);this.$bar=e("<div></div>").addClass("ms-ctimer-bullet").appendTo(this.$element);if(!this.$canvas[0].getContext){this.destroy();this.disable=true;return}this.ctx=this.$canvas[0].getContext("2d");this.prog=0;this.__w=(this.options.radius+this.options.stroke/2)*2;this.$canvas[0].width=this.__w;this.$canvas[0].height=this.__w};n.create=function(){if(this.disable)return;r.create.call(this);this.slider.api.addEventListener(MSSliderEvent.WAITING,this._update,this);var e=this;this.$element.click(function(){if(e.slider.api.paused)e.slider.api.resume();else e.slider.api.pause()});this._update()};n._update=function(){var t=this;e(this).stop(true).animate({prog:this.slider.api._delayProgress*.01},{duration:200,step:function(){t._draw()}})};n._draw=function(){this.ctx.clearRect(0,0,this.__w,this.__w);this.ctx.beginPath();this.ctx.arc(this.__w*.5,this.__w*.5,this.options.radius,Math.PI*1.5,Math.PI*1.5+2*Math.PI*this.prog,false);this.ctx.strokeStyle=this.options.color;this.ctx.lineWidth=this.options.stroke;this.ctx.stroke()};n.destroy=function(){r.destroy();if(this.disable)return;e(this).stop(true);this.slider.api.removeEventListener(MSSliderEvent.WAITING,this._update,this);this.$element.remove()};window.MSCircleTimer=t;MSSlideController.registerControl("circletimer",t)})(jQuery);(function(e){"use strict";window.MSLightbox=function(t){BaseControl.call(this,t);this.options.autohide=false;e.extend(this.options,t);this.data_list=[]};MSLightbox.fadeDuratation=400;MSLightbox.extend(BaseControl);var t=MSLightbox.prototype;var n=BaseControl.prototype;t.setup=function(){n.setup.call(this);this.$element=e("<div></div>").addClass(this.options.prefix+"lightbox-btn").appendTo(this.cont)};t.slideAction=function(t){e("<div></div>").addClass(this.options.prefix+"lightbox-btn").appendTo(t.$element).append(e(t.$element.find(".ms-lightbox")))};t.create=function(){n.create.call(this)};MSSlideController.registerControl("lightbox",MSLightbox)})(jQuery);(function(e){"use strict";window.MSSlideInfo=function(t){BaseControl.call(this,t);this.options.autohide=false;this.options.align=null;this.options.inset=false;this.options.margin=10;this.options.size=100;this.options.dir="h";e.extend(this.options,t);this.data_list=[]};MSSlideInfo.fadeDuratation=400;MSSlideInfo.extend(BaseControl);var t=MSSlideInfo.prototype;var n=BaseControl.prototype;t.setup=function(){this.$element=e("<div></div>").addClass(this.options.prefix+"slide-info").addClass("ms-dir-"+this.options.dir);n.setup.call(this);if(this.slider.$controlsCont===this.cont){this.$element.appendTo(this.slider.$element)}else{this.$element.appendTo(this.cont)}if(!this.options.insetTo&&this.options.align){var t=this.options.align;if(this.options.inset){this.$element.css(t,this.options.margin)}else if(t==="top"){this.$element.prependTo(this.slider.$element).css({"margin-bottom":this.options.margin,position:"relative"})}else if(t==="bottom"){this.$element.css({"margin-top":this.options.margin,position:"relative"})}else{this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.align()}if(this.options.dir==="v"){this.$element.width(this.options.size)}else{this.$element.css("min-height",this.options.size)}}};t.align=function(e){if(this.detached){return}var t=this.options.align;var n=this.slider.reserveSpace(t,this.options.size+this.options.margin*2);this.$element.css(t,-n-this.options.size-this.options.margin)};t.slideAction=function(t){var n=e(t.$element.find(".ms-info"));var r=this;n.detach();this.data_list[t.index]=n};t.create=function(){n.create.call(this);this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,this.update,this);this.cindex=this.slider.api.index();this.switchEle(this.data_list[this.cindex])};t.update=function(){var e=this.slider.api.index();this.switchEle(this.data_list[e]);this.cindex=e};t.switchEle=function(e){if(this.current_ele){var t=this;if(this.current_ele[0].tween)this.current_ele[0].tween.stop(true);this.current_ele[0].tween=CTween.animate(this.current_ele,MSSlideInfo.fadeDuratation,{opacity:0},{complete:function(){this.detach();this[0].tween=null;e.css("position","relative")},target:this.current_ele});e.css("position","absolute")}this.__show(e)};t.__show=function(e){e.appendTo(this.$element).css("opacity","0");if(this.current_ele){e.height(Math.max(e.height(),this.current_ele.height()))}clearTimeout(this.tou);this.tou=setTimeout(function(){CTween.fadeIn(e,MSSlideInfo.fadeDuratation);e.css("height","")},MSSlideInfo.fadeDuratation);if(e[0].tween)e[0].tween.stop(true);this.current_ele=e};t.destroy=function(){n.destroy();clearTimeout(this.tou);if(this.current_ele&&this.current_ele[0].tween){this.current_ele[0].tween.stop("true")}this.$element.remove();this.slider.api.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.slider.api.removeEventListener(MSSliderEvent.CHANGE_START,this.update,this)};MSSlideController.registerControl("slideinfo",MSSlideInfo)})(jQuery);(function(e){window.MSGallery=function(t,n){this.id=t;this.slider=n;this.telement=e("#"+t);this.botcont=e("<div></div>").addClass("ms-gallery-botcont").appendTo(this.telement);this.thumbcont=e("<div></div>").addClass("ms-gal-thumbcont hide-thumbs").appendTo(this.botcont);this.playbtn=e("<div></div>").addClass("ms-gal-playbtn").appendTo(this.botcont);this.thumbtoggle=e("<div></div>").addClass("ms-gal-thumbtoggle").appendTo(this.botcont);n.control("thumblist",{insertTo:this.thumbcont,autohide:false,dir:"h"});n.control("slidenum",{insertTo:this.botcont,autohide:false});n.control("slideinfo",{insertTo:this.botcont,autohide:false});n.control("timebar",{insertTo:this.botcont,autohide:false});n.control("bullets",{insertTo:this.botcont,autohide:false})};var t=MSGallery.prototype;t._init=function(){var e=this;if(!this.slider.api.paused)this.playbtn.addClass("btn-pause");this.playbtn.click(function(){if(e.slider.api.paused){e.slider.api.resume();e.playbtn.addClass("btn-pause")}else{e.slider.api.pause();e.playbtn.removeClass("btn-pause")}});this.thumbtoggle.click(function(){if(e.vthumbs){e.thumbtoggle.removeClass("btn-hide");e.vthumbs=false;e.thumbcont.addClass("hide-thumbs")}else{e.thumbtoggle.addClass("btn-hide");e.thumbcont.removeClass("hide-thumbs");e.vthumbs=true}})};t.setup=function(){var t=this;e(document).ready(function(){t._init()})}})(jQuery);(function(e){var t=function(e,t,n){return"https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key="+e+"&photoset_id="+t+"&per_page="+n+"&extras=description,date_taken,owner_name,views&format=json&jsoncallback=?"};var n=function(e,t,n){return"https://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key="+e+"&user_id="+t+"&per_page="+n+"&extras=description,date_taken,owner_name,views&format=json&jsoncallback=?"};var r=function(e,t,n,r,i){return"https://farm"+e+".staticflickr.com/"+t+"/"+n+"_"+r+i+".jpg"};window.MSFlickrV2=function(r,i){var s={count:10,type:"photoset",thumbSize:"q",imgSize:"c"};this.slider=r;this.slider.preventInit=true;if(!i.key){this.errMsg("Flickr API Key required. Please add it in settings.");return}e.extend(s,i);this.options=s;var o=this;if(this.options.type==="photoset"){e.getJSON(t(this.options.key,this.options.id,this.options.count),function(e){o._photosData(e)})}else{e.getJSON(n(this.options.key,this.options.id,this.options.count),function(e){o.options.type="photos";o._photosData(e)})}if(this.options.imgSize!==""&&this.options.imgSize!=="-")this.options.imgSize="_"+this.options.imgSize;this.options.thumbSize="_"+this.options.thumbSize;this.slideTemplate=this.slider.$element.find(".ms-slide")[0].outerHTML;this.slider.$element.find(".ms-slide").remove()};var i=MSFlickrV2.prototype;i._photosData=function(t){if(t.stat==="fail"){this.errMsg("Flickr API ERROR#"+t.code+": "+t.message);return}var n=this;var r=this.options.author||this.options.desc;e.each(t[this.options.type].photo,function(t,r){var i=n.slideTemplate.replace(/{{[\w-]+}}/g,function(e){e=e.replace(/{{|}}/g,"");if(s[e]){return s[e](r,n)}else{return"["+e+"]"}});e(i).appendTo(n.slider.$element)});n._initSlider()};i.errMsg=function(t){this.slider.$element.css("display","block");if(!this.errEle)this.errEle=e('<div style="font-family:Arial; color:red; font-size:12px; position:absolute; top:10px; left:10px"></div>').appendTo(this.slider.$loading);this.errEle.html(t)};i._initSlider=function(){this.slider.preventInit=false;this.slider._init()};var s={image:function(e,t){return r(e.farm,e.server,e.id,e.secret,t.options.imgSize)},thumb:function(e,t){return r(e.farm,e.server,e.id,e.secret,t.options.thumbSize)},title:function(e,t){return e.title},"owner-name":function(e,t){return e.ownername},"date-taken":function(e,t){return e.datetaken},views:function(e,t){return e.views},description:function(e,t){return e.description._content}}})(jQuery);(function(e){window.MSFacebookGallery=function(t,n){var r={count:10,type:"photostream",thumbSize:"320",imgSize:"orginal",https:false};this.slider=t;this.slider.preventInit=true;e.extend(r,n);this.options=r;this.graph=this.options.https?"https://graph.facebook.com":"http://graph.facebook.com";var i=this;if(this.options.type==="photostream"){e.getJSON(this.graph+"/"+this.options.username+"/photos/uploaded/?fields=source,name,link,images,from&limit="+this.options.count,function(e){i._photosData(e)})}else{e.getJSON(this.graph+"/"+this.options.albumId+"/photos?fields=source,name,link,images,from&limit="+this.options.count,function(e){i._photosData(e)})}this.slideTemplate=this.slider.$element.find(".ms-slide")[0].outerHTML;this.slider.$element.find(".ms-slide").remove()};var t=MSFacebookGallery.prototype;t._photosData=function(t){if(t.error){this.errMsg("Facebook API ERROR#"+t.error.code+"("+t.error.type+")"+": "+t.error.message);return}var n=this;var i=this.options.author||this.options.desc;for(var s=0,o=t.data.length;s!==o;s++){var u=n.slideTemplate.replace(/{{[\w-]+}}/g,function(e){e=e.replace(/{{|}}/g,"");if(r[e]){return r[e](t.data[s],n)}else{return"{{"+e+"}}"}});e(u).appendTo(n.slider.$element)}n._initSlider()};t.errMsg=function(t){this.slider.$element.css("display","block");if(!this.errEle)this.errEle=e('<div style="font-family:Arial; color:red; font-size:12px; position:absolute; top:10px; left:10px"></div>').appendTo(this.slider.$loading);this.errEle.html(t)};t._initSlider=function(){this.slider.preventInit=false;this.slider._init()};var n=function(e,t){if(t==="orginal"){return e[0].source}for(var n=0,r=e.length;n!==r;n++){if(e[n].source.indexOf(t+"x"+t)!==-1)return e[n].source}return e[r-3].source};var r={image:function(e,t){return n(e.images,t.options.imgSize)},thumb:function(e,t){return n(e.images,t.options.thumbSize)},name:function(e,t){return e.name},"owner-name":function(e,t){return e.from.name},link:function(e,t){return e.link}}})(jQuery);(function(e){"use strict";window.MSScrollParallax=function(e,t,n,r){this.fade=r;this.slider=e;this.parallax=t/100;this.bgparallax=n/100;e.api.addEventListener(MSSliderEvent.INIT,this.init,this);e.api.addEventListener(MSSliderEvent.DESTROY,this.destory,this);e.api.addEventListener(MSSliderEvent.CHANGE_END,this.resetLayers,this);e.api.addEventListener(MSSliderEvent.CHANGE_START,this.updateCurrentSlide,this)};window.MSScrollParallax.setup=function(e,t,n,r){if(window._mobile){return}if(prallax==null){prallax=50}if(n==null){n=40}return new MSScrollParallax(e,t,n,r)};var t=window.MSScrollParallax.prototype;t.init=function(t){this.slider.$element.addClass("ms-scroll-parallax");this.sliderOffset=this.slider.$element.offset().top;this.updateCurrentSlide();var n=this.slider.api.view.slideList,r;for(var i=0,s=n.length;i!==s;i++){r=n[i];if(r.$layers){r.$layers.wrap('<div class="ms-scroll-parallax-cont"></div>');r.$scrollParallaxCont=r.$layers.parent()}}e(window).on("scroll",{that:this},this.moveParallax).trigger("scroll")};t.resetLayers=function(e){if(!this.lastSlide){return}var t=this.lastSlide.$scrollParallaxCont;if(window._css2d){if(t){t[0].style[window._jcsspfx+"Transform"]=""}this.lastSlide.$imgcont[0].style[window._jcsspfx+"Transform"]=""}else{if(t){t[0].style.top=""}this.lastSlide.$imgcont[0].style.top="0px"}};t.updateCurrentSlide=function(e){this.lastSlide=this.currentSlide;this.currentSlide=this.slider.api.currentSlide;this.moveParallax({data:{that:this}})};t.moveParallax=function(t){var n=t.data.that,r=n.slider,i=n.sliderOffset,s=e(window).scrollTop(),o=n.currentSlide.$scrollParallaxCont,u=n.currentSlide.$imgcont,a=i-s;if(a<=0){if(o){if(window._css3d){o[0].style[window._jcsspfx+"Transform"]="translateY("+ -a*n.parallax+"px) translateZ(0)"}else if(window._css2d){o[0].style[window._jcsspfx+"Transform"]="translateY("+ -a*n.parallax+"px)"}else{o[0].style.top=-a*n.parallax+"px"}}n.updateSlidesBG(-a*n.bgparallax+"px",true);if(o&&n.fade){o.css("opacity",1-Math.min(1,-a/r.api.height))}}else{if(o){if(window._css2d){o[0].style[window._jcsspfx+"Transform"]=""}else{o[0].style.top=""}}n.updateSlidesBG("0px",false);if(o&&n.fade){o.css("opacity",1)}}};t.updateSlidesBG=function(t,n){var r=this.slider.api.view.slideList,i=n&&!e.browser.msie&&!e.browser.opera?"fixed":"";for(var s=0,o=r.length;s!==o;s++){r[s].$imgcont[0].style.position=i;r[s].$imgcont[0].style.top=t}};t.destory=function(){slider.api.removeEventListener(MSSliderEvent.INIT,this.init,this);slider.api.removeEventListener(MSSliderEvent.DESTROY,this.destory,this);slider.api.removeEventListener(MSSliderEvent.CHANGE_END,this.resetLayers,this);slider.api.removeEventListener(MSSliderEvent.CHANGE_START,this.updateCurrentSlide,this);e(window).off("scroll",this.moveParallax)}})(jQuery)